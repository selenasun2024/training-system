<template>
  <div class="my-growth">
    <!-- é¡¶éƒ¨ä¸ªäººæ¦‚è§ˆåŒº -->
    <div class="personal-overview">
      <div class="overview-cards">
        <PersonalInfoCard />
        <AbilityRadar />
        <IdentityBadges />
      </div>
    </div>

    <!-- ä¸»ä½“å†…å®¹åŒº -->
    <div class="main-content">
      <!-- å·¦ä¾§ï¼šæˆé•¿è·¯å¾„å›¾ -->
      <div class="growth-path-section">
        <div class="section-header">
          <h2>ğŸ—ºï¸ æˆ‘çš„æˆé•¿è·¯å¾„</h2>
          <p>ç‚¹å‡»ä»»æ„èŒä½è®¾ä¸ºå‘å±•ç›®æ ‡</p>
        </div>
        <GrowthPathMap />
      </div>

      <!-- å³ä¾§ï¼šç›®æ ‡ç®¡ç†é¢æ¿ -->
      <div class="goal-management-section">
        <div class="section-header">
          <h2>ğŸ“‹ ç›®æ ‡ç®¡ç†</h2>
          <el-button type="primary" @click="showAddGoalDialog = true">
            <el-icon><Plus /></el-icon>
            æ·»åŠ ç›®æ ‡
          </el-button>
        </div>
        <GoalManagement />
      </div>
    </div>

    <!-- åº•éƒ¨æ´»åŠ¨åŒº -->
    <div class="activity-section">
      <div class="section-header">
        <h2>ğŸ“ˆ æœ€è¿‘æ´»åŠ¨</h2>
      </div>
      <ActivityTimeline />
    </div>

    <!-- æ·»åŠ ç›®æ ‡å¯¹è¯æ¡† -->
    <el-dialog
      v-model="showAddGoalDialog"
      title="æ·»åŠ æˆé•¿ç›®æ ‡"
      width="600px"
    >
      <AddGoalForm @success="handleAddGoalSuccess" />
    </el-dialog>
  </div>
</template>

<script setup lang="ts">
import { ref } from 'vue'
import { Plus } from '@element-plus/icons-vue'
import PersonalInfoCard from '../components/PersonalInfoCard.vue'
import AbilityRadar from '../components/AbilityRadar.vue'
import IdentityBadges from '../components/IdentityBadges.vue'
import GrowthPathMap from '../components/GrowthPathMap.vue'
import GoalManagement from '../components/GoalManagement.vue'
import ActivityTimeline from '../components/ActivityTimeline.vue'
import AddGoalForm from '../components/AddGoalForm.vue'

// å“åº”å¼æ•°æ®
const showAddGoalDialog = ref(false)

// æ–¹æ³•
const handleAddGoalSuccess = () => {
  showAddGoalDialog.value = false
  // åˆ·æ–°ç›®æ ‡åˆ—è¡¨
  // TODO: å®ç°ç›®æ ‡åˆ—è¡¨åˆ·æ–°é€»è¾‘
}
</script>

<style scoped>
.my-growth {
  padding: 24px;
  background-color: #f5f7fa;
  min-height: 100vh;
}

/* é¡¶éƒ¨ä¸ªäººæ¦‚è§ˆåŒº */
.personal-overview {
  margin-bottom: 24px;
}

.overview-cards {
  display: grid;
  grid-template-columns: 1fr 1fr 1fr;
  gap: 24px;
  margin-bottom: 24px;
}

/* ä¸»ä½“å†…å®¹åŒº */
.main-content {
  display: grid;
  grid-template-columns: 1fr 400px;
  gap: 24px;
  margin-bottom: 24px;
}

.growth-path-section,
.goal-management-section {
  background: white;
  border-radius: 12px;
  padding: 24px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.growth-path-section {
  min-height: 600px;
}

.goal-management-section {
  min-height: 600px;
}

/* åº•éƒ¨æ´»åŠ¨åŒº */
.activity-section {
  background: white;
  border-radius: 12px;
  padding: 24px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

/* åŒºåŸŸæ ‡é¢˜ */
.section-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
  padding-bottom: 12px;
  border-bottom: 2px solid #e4e7ed;
}

.section-header h2 {
  margin: 0;
  font-size: 18px;
  font-weight: 600;
  color: #303133;
}

.section-header p {
  margin: 4px 0 0 0;
  font-size: 14px;
  color: #909399;
}

/* å“åº”å¼è®¾è®¡ */
@media (max-width: 1200px) {
  .main-content {
    grid-template-columns: 1fr;
  }
  
  .goal-management-section {
    order: -1;
  }
}

@media (max-width: 768px) {
  .my-growth {
    padding: 16px;
  }
  
  .overview-cards {
    grid-template-columns: 1fr;
    gap: 16px;
  }
  
  .main-content {
    gap: 16px;
  }
  
  .growth-path-section,
  .goal-management-section,
  .activity-section {
    padding: 16px;
  }
}
</style> 