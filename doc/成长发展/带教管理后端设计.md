# å¸¦æ•™ç®¡ç†åç«¯è®¾è®¡

## âš ï¸ é‡è¦è¯´æ˜

### è®¾è®¡èƒŒæ™¯ä¸å‰ç«¯ç°çŠ¶
**å‰ç«¯å®Œæˆåº¦**ï¼šå¸¦æ•™åŠŸèƒ½åœ¨å››ä¸ªä½ç½®çš„å‰ç«¯è®¾è®¡å·²åŸºæœ¬å®Œæˆ
- âœ… **é¡¹ç›®è¯¦æƒ… - å¸¦æ•™**ï¼šMentoringManagement.vueï¼ˆ4ä¸ªTabï¼šæŒ‡æ´¾å…³ç³»ã€ä»»åŠ¡çŠ¶æ€ã€å¸¦æ•™è¯„ä»·ã€å¸¦æ•™æ ‡å‡†ï¼‰
- âœ… **å¸¦æ•™å·¥ä½œå¹³å°**ï¼šMentorWorkbench.vue + mentorWorkbench.ts storeï¼ˆå­¦å‘˜ç®¡ç†ã€å¸¦æ•™æ‰§è¡Œã€èµ„æºå·¥å…·ï¼‰  
- âœ… **æ•™åŠ¡å·¥ä½œå° - æ•™åŠ¡**ï¼šå·¥ä½œå°èšåˆåŠŸèƒ½å·²å®ç°
- âœ… **å­¦ä¹ ä¸­å¿ƒ**ï¼šä¸ªäººæˆé•¿æ¡£æ¡ˆå’Œå¸¦æ•™å†å²è®°å½•åŠŸèƒ½å·²å®Œæˆ

**åç«¯ä»»åŠ¡**ï¼šåŸºäºå‰ç«¯APIå¥‘çº¦å’Œæ•°æ®ç»“æ„ï¼Œå®ç°å®Œæ•´çš„å¸¦æ•™ç®¡ç†åç«¯ç³»ç»Ÿ

---

## ğŸ“‹ ç›®å½•

### 1. è®¾è®¡ç†å¿µä¸æ¶æ„
- [1.1 å¸¦æ•™ç®¡ç†ç³»ç»Ÿè®¾è®¡ç†å¿µ](#11-å¸¦æ•™ç®¡ç†ç³»ç»Ÿè®¾è®¡ç†å¿µ)
- [1.2 ä¸åŸ¹è®­ç³»ç»Ÿçš„é›†æˆæ¶æ„](#12-ä¸åŸ¹è®­ç³»ç»Ÿçš„é›†æˆæ¶æ„)
- [1.3 å››ä½ä¸€ä½“çš„åŠŸèƒ½å¸ƒå±€](#13-å››ä½ä¸€ä½“çš„åŠŸèƒ½å¸ƒå±€)

### 2. æ•°æ®åº“è®¾è®¡
- [2.1 å¸¦æ•™æ ¸å¿ƒæ•°æ®æ¨¡å‹](#21-å¸¦æ•™æ ¸å¿ƒæ•°æ®æ¨¡å‹)
- [2.2 æ•°æ®åº“è¡¨ç»“æ„è®¾è®¡](#22-æ•°æ®åº“è¡¨ç»“æ„è®¾è®¡)
- [2.3 æ•°æ®å…³ç³»ä¸çº¦æŸ](#23-æ•°æ®å…³ç³»ä¸çº¦æŸ)

### 3. APIæ¥å£è®¾è®¡
- [3.1 åŸºäºå‰ç«¯å¥‘çº¦çš„APIè®¾è®¡](#31-åŸºäºå‰ç«¯å¥‘çº¦çš„apiè®¾è®¡)
- [3.2 å®Œæ•´APIæ¥å£æ¸…å•](#32-å®Œæ•´apiæ¥å£æ¸…å•)
- [3.3 APIå®ç°ä¼˜å…ˆçº§](#33-apiå®ç°ä¼˜å…ˆçº§)

### 4. ä¸šåŠ¡æµç¨‹è®¾è®¡
- [4.1 å¸ˆå¾’å…³ç³»å»ºç«‹æµç¨‹](#41-å¸ˆå¾’å…³ç³»å»ºç«‹æµç¨‹)
- [4.2 å¸¦æ•™è®¡åˆ’æ‰§è¡Œæµç¨‹](#42-å¸¦æ•™è®¡åˆ’æ‰§è¡Œæµç¨‹)
- [4.3 å¸¦æ•™è¯„ä»·æµç¨‹](#43-å¸¦æ•™è¯„ä»·æµç¨‹)
- [4.4 æ•°æ®åŒæ­¥æœºåˆ¶](#44-æ•°æ®åŒæ­¥æœºåˆ¶)

### 5. ç³»ç»Ÿé›†æˆè®¾è®¡
- [5.1 ä¸åŸ¹è®­é¡¹ç›®ç³»ç»Ÿé›†æˆ](#51-ä¸åŸ¹è®­é¡¹ç›®ç³»ç»Ÿé›†æˆ)
- [5.2 ä¸æˆé•¿æ¡£æ¡ˆç³»ç»Ÿé›†æˆ](#52-ä¸æˆé•¿æ¡£æ¡ˆç³»ç»Ÿé›†æˆ)
- [5.3 ä¸äººäº‹ç³»ç»Ÿé›†æˆ](#53-ä¸äººäº‹ç³»ç»Ÿé›†æˆ)

### 6. å®æ–½è®¡åˆ’
- [6.1 å‰ç«¯Mockæ•°æ®éªŒè¯](#61-å‰ç«¯mockæ•°æ®éªŒè¯)
- [6.2 å¼€å‘é˜¶æ®µè§„åˆ’](#62-å¼€å‘é˜¶æ®µè§„åˆ’)
- [6.3 æŠ€æœ¯å®ç°è·¯å¾„](#63-æŠ€æœ¯å®ç°è·¯å¾„)
- [6.4 æµ‹è¯•ä¸éƒ¨ç½²è®¡åˆ’](#64-æµ‹è¯•ä¸éƒ¨ç½²è®¡åˆ’)

---

## 1.1 å¸¦æ•™ç®¡ç†ç³»ç»Ÿè®¾è®¡ç†å¿µ

### ğŸ¯ **æ ¸å¿ƒè®¾è®¡åŸåˆ™**

#### **1.1.1 åŸ¹è®­é©±åŠ¨çš„å¸¦æ•™ä½“ç³»**
```typescript
// è®¾è®¡ç†å¿µï¼šåŸ¹è®­é¡¹ç›®æ˜¯å¸¦æ•™çš„æºå¤´å’Œè½½ä½“
interface TrainingDrivenMentorship {
  principle: 'åŸ¹è®­ä¸ºæºï¼Œå¸¦æ•™ä¸ºç¿¼'
  workflow: 'åŸ¹è®­å‘èµ· â†’ è‡ªåŠ¨åŒ¹é… â†’ å»ºç«‹å¸ˆå¾’å…³ç³» â†’ è·Ÿè¸ªè¯„ä»· â†’ æˆé•¿è®°å½•'
  benefits: ['æ— ç¼è¡”æ¥', 'æ•°æ®ç»Ÿä¸€', 'æµç¨‹è§„èŒƒ', 'æ•ˆæœå¯è¿½æº¯']
}
```

#### **1.1.2 å››ä½ä¸€ä½“çš„åŠŸèƒ½å¸ƒå±€**
```mermaid
graph TB
    subgraph "é¡¹ç›®è¯¦æƒ…-å¸¦æ•™"
        A1[å¸ˆå¾’å…³ç³»ç®¡ç†]
        A2[å¸¦æ•™è®¡åˆ’åˆ¶å®š]
        A3[è¿‡ç¨‹è·Ÿè¸ª]
        A4[æ ‡å‡†ç®¡ç†]
    end
    
    subgraph "å¸¦æ•™å·¥ä½œå¹³å°"
        B1[å­¦å‘˜ç®¡ç†]
        B2[å¸¦æ•™æ‰§è¡Œ]
        B3[èµ„æºå·¥å…·]
    end
    
    subgraph "æ•™åŠ¡å·¥ä½œå°"
        C1[é¡¹ç›®ç›‘æ§]
        C2[æ•°æ®ç»Ÿè®¡]
        C3[è´¨é‡ç®¡ç†]
    end
    
    subgraph "å­¦ä¹ ä¸­å¿ƒ"
        D1[å¸¦æ•™å†å²]
        D2[æˆé•¿æ¡£æ¡ˆ]
        D3[èƒ½åŠ›å‘å±•]
    end
    
    A1 <--> B1
    A2 <--> B2
    C1 <--> A1
    D1 <--> A1
    
    style A1 fill:#e8f5e9
    style B1 fill:#fff3e0
    style C1 fill:#e3f2fd
    style D1 fill:#fce4ec
```

#### **1.1.3 ç§¯æœ¨å¼å¸¦æ•™æ¨¡å—è®¾è®¡**
```typescript
// æ¨¡å—åŒ–è®¾è®¡ï¼šæ¯ä¸ªåŠŸèƒ½æ¨¡å—éƒ½æ˜¯ç‹¬ç«‹çš„"ç§¯æœ¨"
interface MentorshipModuleArchitecture {
  coreModules: {
    relationship: 'å¸ˆå¾’å…³ç³»ç®¡ç†æ¨¡å—'
    planning: 'å¸¦æ•™è®¡åˆ’ç®¡ç†æ¨¡å—'
    execution: 'å¸¦æ•™æ‰§è¡Œè·Ÿè¸ªæ¨¡å—'
    evaluation: 'å¸¦æ•™è¯„ä»·ç³»ç»Ÿæ¨¡å—'
    growth: 'æˆé•¿æ¡£æ¡ˆé›†æˆæ¨¡å—'
  }
  
  crossCuttingConcerns: {
    notification: 'é€šçŸ¥æé†’æœåŠ¡'
    integration: 'ç³»ç»Ÿé›†æˆæœåŠ¡'
    workflow: 'æµç¨‹å¼•æ“æœåŠ¡'
  }
}
```

---

## 1.2 ä¸åŸ¹è®­ç³»ç»Ÿçš„é›†æˆæ¶æ„

### ğŸ”— **æ•°æ®æµé›†æˆè®¾è®¡**

```mermaid
graph LR
    subgraph "åŸ¹è®­é¡¹ç›®ç³»ç»Ÿ"
        TP[åŸ¹è®­é¡¹ç›®]
        TS[åŸ¹è®­å­¦å‘˜]
        TT[åŸ¹è®­è®²å¸ˆ]
    end
    
    subgraph "å¸¦æ•™ç®¡ç†ç³»ç»Ÿ"
        MR[å¸ˆå¾’å…³ç³»]
        MP[å¸¦æ•™è®¡åˆ’]
        ME[å¸¦æ•™è¯„ä»·]
    end
    
    subgraph "æˆé•¿æ¡£æ¡ˆç³»ç»Ÿ"
        GP[æˆé•¿æ¡£æ¡ˆ]
        GH[å¸¦æ•™å†å²]
        GS[æŠ€èƒ½å‘å±•]
    end
    
    TP --> MR
    TS --> MR
    TT --> MR
    MR --> GP
    MP --> GH
    ME --> GS
    
    style TP fill:#e8f5e9
    style MR fill:#fff3e0
    style GP fill:#e3f2fd
```

### ğŸ® **äº‹ä»¶é©±åŠ¨é›†æˆæœºåˆ¶**
```typescript
// åŸ¹è®­é¡¹ç›®äº‹ä»¶ â†’ è‡ªåŠ¨è§¦å‘å¸¦æ•™æµç¨‹
@EventHandler('training.project.published')
export class MentorshipAutoCreationHandler {
  async handle(event: TrainingProjectPublishedEvent) {
    // 1. æ£€æŸ¥é¡¹ç›®æ˜¯å¦å¯ç”¨å¸¦æ•™
    if (!event.project.mentorshipEnabled) return
    
    // 2. è‡ªåŠ¨åˆ›å»ºå¸ˆå¾’å…³ç³»
    const relationships = await this.createMentorshipRelationships(event.project)
    
    // 3. è§¦å‘å¸¦æ•™è®¡åˆ’ç”Ÿæˆ
    for (const relationship of relationships) {
      await this.planGenerationService.createMentorshipPlan(relationship)
    }
    
    // 4. å‘é€é€šçŸ¥
    await this.notificationService.notifyMentorshipCreated(relationships)
  }
}
```

---

## 1.3 å››ä½ä¸€ä½“çš„åŠŸèƒ½å¸ƒå±€

### ğŸ“ **1. é¡¹ç›®è¯¦æƒ… - å¸¦æ•™ï¼ˆåµŒå…¥å¼ç®¡ç†ï¼‰**
```typescript
interface ProjectEmbeddedMentorship {
  location: 'é¡¹ç›®è¯¦æƒ…é¡µé¢å†…çš„å¸¦æ•™Tab'
  purpose: 'é¡¹ç›®çº§åˆ«çš„å¸¦æ•™å…³ç³»ç®¡ç†'
  
  tabs: {
    assignments: 'æŒ‡æ´¾å…³ç³» - å¸ˆå¾’é…å¯¹ç®¡ç†'
    progress: 'ä»»åŠ¡çŠ¶æ€ - å¸¦æ•™è¿›åº¦è·Ÿè¸ª'  
    evaluations: 'å¸¦æ•™è¯„ä»· - è¿‡ç¨‹è¯„ä»·è®°å½•'
    standards: 'å¸¦æ•™æ ‡å‡† - è´¨é‡æ ‡å‡†ç®¡ç†'
  }
  
  userRoles: ['é¡¹ç›®è´Ÿè´£äºº', 'æ•™åŠ¡ç®¡ç†å‘˜']
  functions: ['åˆ›å»ºå¸ˆå¾’å…³ç³»', 'è°ƒæ•´å¸¦æ•™å®‰æ’', 'ç›‘æ§å¸¦æ•™è´¨é‡']
}
```

### ğŸ¢ **2. å¸¦æ•™å·¥ä½œå¹³å°ï¼ˆå¯¼å¸ˆä¸“ç”¨ï¼‰**
```typescript
interface MentorDedicatedWorkbench {
  location: '/training-management/workbench/mentor'
  purpose: 'å¯¼å¸ˆæ—¥å¸¸å¸¦æ•™å·¥ä½œç®¡ç†'
  
  sections: {
    studentManagement: 'å­¦å‘˜ç®¡ç† - æˆ‘çš„å­¦å‘˜åˆ—è¡¨å’Œä¿¡æ¯'
    executionManagement: 'å¸¦æ•™æ‰§è¡Œ - è®¡åˆ’ã€ä»»åŠ¡ã€è¯„ä»·ç®¡ç†'
    resourceTools: 'èµ„æºå·¥å…· - å¸¦æ•™èµ„æ–™å’Œå·¥å…·'
  }
  
  userRoles: ['å¸¦æ•™å¯¼å¸ˆ']
  functions: ['æŸ¥çœ‹æˆ‘çš„å­¦å‘˜', 'åˆ¶å®šå¸¦æ•™è®¡åˆ’', 'è®°å½•å¸¦æ•™è¿‡ç¨‹', 'æäº¤è¯„ä»·']
}
```

### ğŸ›ï¸ **3. æ•™åŠ¡å·¥ä½œå° - æ•™åŠ¡ï¼ˆç›‘ç®¡è§†è§’ï¼‰**
```typescript
interface AdministrativeWorkbench {
  location: '/training-management/workbench/admin'
  purpose: 'æ•™åŠ¡äººå‘˜çš„å¸¦æ•™ç›‘ç®¡å’Œç»Ÿè®¡'
  
  functions: {
    monitoring: 'å…¨å±€å¸¦æ•™é¡¹ç›®ç›‘æ§'
    statistics: 'å¸¦æ•™æ•°æ®ç»Ÿè®¡åˆ†æ'
    quality: 'å¸¦æ•™è´¨é‡ç®¡ç†'
    reporting: 'å¸¦æ•™æŠ¥è¡¨ç”Ÿæˆ'
  }
  
  userRoles: ['æ•™åŠ¡ç®¡ç†å‘˜', 'åŸ¹è®­ä¸»ç®¡']
  features: ['å¤šé¡¹ç›®å¸¦æ•™æ¦‚è§ˆ', 'å¯¼å¸ˆå·¥ä½œé‡ç»Ÿè®¡', 'è´¨é‡åˆ†ææŠ¥å‘Š']
}
```

### ğŸ“ **4. å­¦ä¹ ä¸­å¿ƒï¼ˆå­¦å‘˜è§†è§’ï¼‰**
```typescript
interface StudentLearningCenter {
  location: '/training-management/personal-center'
  purpose: 'å­¦å‘˜ä¸ªäººçš„å¸¦æ•™å†å²å’Œæˆé•¿è®°å½•'
  
  contents: {
    mentorshipHistory: 'æˆ‘çš„å¸¦æ•™å†å²è®°å½•'
    growthProfile: 'åŸºäºå¸¦æ•™çš„æˆé•¿æ¡£æ¡ˆ'
    skillDevelopment: 'æŠ€èƒ½å‘å±•è½¨è¿¹'
    achievementRecord: 'å¸¦æ•™æˆå°±è®°å½•'
  }
  
  userRoles: ['å­¦å‘˜', 'åŸ¹è®­å‚ä¸è€…']
  features: ['æŸ¥çœ‹å¸¦æ•™è®°å½•', 'åé¦ˆå¯¼å¸ˆè¯„ä»·', 'è¿½è¸ªæˆé•¿è½¨è¿¹']
}
```

---

## 2.1 å¸¦æ•™æ ¸å¿ƒæ•°æ®æ¨¡å‹

### ğŸ§© **é¢†åŸŸæ¨¡å‹è®¾è®¡**

```typescript
// å¸¦æ•™é¡¹ç›®èšåˆæ ¹
class MentorshipProject {
  id: MentorshipProjectId
  title: string
  description: string
  status: MentorshipStatus
  
  // å…³è”åŸ¹è®­é¡¹ç›®
  sourceTrainingProject?: TrainingProjectReference
  
  // å¸ˆå¾’å…³ç³»
  mentorId: UserId
  studentId: UserId
  
  // æ—¶é—´ç®¡ç†
  plannedDuration: number
  actualDuration?: number
  startDate: Date
  endDate?: Date
  
  // å¸¦æ•™å†…å®¹
  phases: MentorshipPhase[]
  tasks: MentorshipTask[]
  evaluations: MentorshipEvaluation[]
  
  // é¢†åŸŸæ–¹æ³•
  assignMentor(mentorId: UserId): void
  createPhase(phaseData: CreatePhaseDto): MentorshipPhase
  submitEvaluation(evaluation: MentorshipEvaluation): void
  complete(): void
}

// å¸ˆå¾’å…³ç³»å®ä½“
class MentorshipRelationship {
  id: RelationshipId
  projectId: MentorshipProjectId
  mentorId: UserId
  studentId: UserId
  type: RelationshipType // 'project_based' | 'long_term' | 'skill_specific'
  
  // åŒ¹é…ä¿¡æ¯
  matchingScore: number
  matchingType: 'manual' | 'system_recommended'
  matchingReasons: string[]
  
  // å…³ç³»çŠ¶æ€
  status: RelationshipStatus
  establishedDate: Date
  
  // äº¤äº’è®°å½•
  interactions: MentorshipInteraction[]
  
  // é¢†åŸŸæ–¹æ³•
  recordInteraction(interaction: MentorshipInteraction): void
  evaluateRelationship(evaluation: RelationshipEvaluation): void
  terminate(reason: string): void
}

// å¸¦æ•™é˜¶æ®µå€¼å¯¹è±¡
class MentorshipPhase {
  id: PhaseId
  name: string
  description: string
  duration: number
  order: number
  
  // é˜¶æ®µç›®æ ‡
  objectives: string[]
  expectedOutcomes: string[]
  
  // é˜¶æ®µä»»åŠ¡
  tasks: MentorshipTask[]
  
  // é˜¶æ®µçŠ¶æ€
  status: PhaseStatus
  progress: number
}
```

---

## 2.2 æ•°æ®åº“è¡¨ç»“æ„è®¾è®¡

### ğŸ“Š **æ ¸å¿ƒè¡¨ç»“æ„æ¦‚è§ˆ**

| **è¡¨å** | **åŠŸèƒ½** | **å…³é”®å­—æ®µ** | **å‰ç«¯æ¥æº** | **è¯´æ˜** | **ä¼˜å…ˆçº§** |
|---------|---------|-------------|-------------|---------|-----------|
| **mentorship_projects** | å¸¦æ•™é¡¹ç›®ä¸»è¡¨ | id, title, mentor_id, student_id, source_training_project_id | MentorshipProject.ts | å¸¦æ•™é¡¹ç›®æ ¸å¿ƒæ•°æ® | ğŸ”¥ é«˜ |
| **mentorship_relationships** | å¸ˆå¾’å…³ç³»è¡¨ | id, project_id, mentor_id, student_id, type, matching_info | ProjectMentorRelationship.ts | å¸ˆå¾’å…³ç³»ç®¡ç† | ğŸ”¥ é«˜ |
| **mentorship_phases** | å¸¦æ•™é˜¶æ®µè¡¨ | id, project_id, name, objectives, duration, status | MentorshipPhase.ts | é˜¶æ®µåŒ–å¸¦æ•™ç®¡ç† | ğŸ”¥ é«˜ |
| **mentorship_tasks** | å¸¦æ•™ä»»åŠ¡è¡¨ | id, phase_id, title, type, status, due_date | MentorshipTask.ts | å¸¦æ•™ä»»åŠ¡è·Ÿè¸ª | ğŸ”¥ é«˜ |
| **mentorship_interactions** | å¸ˆå¾’äº¤äº’è¡¨ | id, relationship_id, type, content, date, attachments | MentorInteraction.ts | äº¤äº’è®°å½•ç®¡ç† | ğŸ”¥ é«˜ |
| **mentorship_evaluations** | å¸¦æ•™è¯„ä»·è¡¨ | id, project_id, evaluator_type, scores, feedback | RelationshipEvaluation.ts | è¯„ä»·åé¦ˆç³»ç»Ÿ | ğŸ”¥ é«˜ |
| **mentorship_plans** | å¸¦æ•™è®¡åˆ’è¡¨ | id, project_id, goals, timeline, milestones | MentorshipPlan.ts | è®¡åˆ’åˆ¶å®šç®¡ç† | ğŸ”¥ é«˜ |
| **mentorship_standards** | å¸¦æ•™æ ‡å‡†è¡¨ | id, project_type_id, criteria, requirements | MentorshipStandard.ts | æ ‡å‡†åŒ–ç®¡ç† | ğŸ“˜ ä¸­ |
| **mentorship_resources** | å¸¦æ•™èµ„æºè¡¨ | id, type, title, url, category, access_level | MentorshipResource.ts | èµ„æºå·¥å…·ç®¡ç† | ğŸ“˜ ä¸­ |
| **mentorship_notifications** | å¸¦æ•™é€šçŸ¥è¡¨ | id, user_id, type, content, related_id, status | é€šçŸ¥ç³»ç»Ÿ | æ¶ˆæ¯æé†’åŠŸèƒ½ | ğŸ“˜ ä¸­ |

### ğŸ—„ï¸ **è¯¦ç»†è¡¨ç»“æ„è®¾è®¡**

#### **1. å¸¦æ•™é¡¹ç›®ä¸»è¡¨ï¼šmentorship_projects**
```sql
-- å¸¦æ•™é¡¹ç›®ä¸»è¡¨ï¼ˆèšåˆæ ¹ï¼‰
CREATE TABLE mentorship_projects (
    id VARCHAR(36) PRIMARY KEY DEFAULT (UUID()),
    
    -- åŸºæœ¬ä¿¡æ¯
    title VARCHAR(255) NOT NULL COMMENT 'å¸¦æ•™é¡¹ç›®æ ‡é¢˜',
    description TEXT COMMENT 'é¡¹ç›®æè¿°',
    project_type ENUM('training_based', 'direct_mentorship', 'skill_development') NOT NULL COMMENT 'é¡¹ç›®ç±»å‹',
    status ENUM('draft', 'active', 'completed', 'paused', 'cancelled') DEFAULT 'draft' COMMENT 'é¡¹ç›®çŠ¶æ€',
    
    -- å…³è”åŸ¹è®­é¡¹ç›®
    source_training_project_id VARCHAR(36) COMMENT 'æºåŸ¹è®­é¡¹ç›®ID',
    source_training_project_name VARCHAR(255) COMMENT 'æºåŸ¹è®­é¡¹ç›®åç§°',
    auto_created BOOLEAN DEFAULT FALSE COMMENT 'æ˜¯å¦ç”±åŸ¹è®­é¡¹ç›®è‡ªåŠ¨åˆ›å»º',
    
    -- å¸ˆå¾’ä¿¡æ¯
    mentor_id VARCHAR(36) NOT NULL COMMENT 'å¯¼å¸ˆID',
    mentor_name VARCHAR(100) NOT NULL COMMENT 'å¯¼å¸ˆå§“å',
    student_id VARCHAR(36) NOT NULL COMMENT 'å­¦å‘˜ID', 
    student_name VARCHAR(100) NOT NULL COMMENT 'å­¦å‘˜å§“å',
    
    -- æ—¶é—´ç®¡ç†
    planned_duration INTEGER NOT NULL COMMENT 'è®¡åˆ’æ—¶é•¿ï¼ˆå¤©ï¼‰',
    actual_duration INTEGER COMMENT 'å®é™…æ—¶é•¿ï¼ˆå¤©ï¼‰',
    start_date DATE NOT NULL COMMENT 'å¼€å§‹æ—¥æœŸ',
    planned_end_date DATE NOT NULL COMMENT 'è®¡åˆ’ç»“æŸæ—¥æœŸ',
    actual_end_date DATE COMMENT 'å®é™…ç»“æŸæ—¥æœŸ',
    
    -- è¿›åº¦ä¿¡æ¯
    progress INTEGER DEFAULT 0 COMMENT 'æ€»ä½“è¿›åº¦ï¼ˆ0-100ï¼‰',
    completed_phases INTEGER DEFAULT 0 COMMENT 'å·²å®Œæˆé˜¶æ®µæ•°',
    total_phases INTEGER DEFAULT 0 COMMENT 'æ€»é˜¶æ®µæ•°',
    
    -- è¯„ä»·ä¿¡æ¯
    mentor_rating DECIMAL(3,2) COMMENT 'å¯¼å¸ˆè¯„åˆ†ï¼ˆ1-5ï¼‰',
    student_rating DECIMAL(3,2) COMMENT 'å­¦å‘˜è¯„åˆ†ï¼ˆ1-5ï¼‰',
    overall_effectiveness DECIMAL(3,2) COMMENT 'æ•´ä½“æœ‰æ•ˆæ€§è¯„åˆ†',
    
    -- æ‰©å±•æ•°æ®ï¼ˆJSONå­˜å‚¨å¤æ‚é…ç½®ï¼‰
    objectives JSON DEFAULT ('[]') COMMENT 'é¡¹ç›®ç›®æ ‡åˆ—è¡¨',
    success_criteria JSON DEFAULT ('[]') COMMENT 'æˆåŠŸæ ‡å‡†',
    custom_config JSON DEFAULT ('{}') COMMENT 'è‡ªå®šä¹‰é…ç½®',
    
    -- å®¡è®¡å­—æ®µ
    created_by VARCHAR(36) NOT NULL COMMENT 'åˆ›å»ºäººID',
    approved_by VARCHAR(36) COMMENT 'å®¡æ‰¹äººID',
    approved_at TIMESTAMP COMMENT 'å®¡æ‰¹æ—¶é—´',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    -- å¤–é”®çº¦æŸ
    FOREIGN KEY (source_training_project_id) REFERENCES training_projects(id),
    FOREIGN KEY (mentor_id) REFERENCES users(id),
    FOREIGN KEY (student_id) REFERENCES users(id),
    FOREIGN KEY (created_by) REFERENCES users(id),
    FOREIGN KEY (approved_by) REFERENCES users(id),
    
    -- ç´¢å¼•
    INDEX idx_mentor_status (mentor_id, status),
    INDEX idx_student_status (student_id, status),
    INDEX idx_source_project (source_training_project_id),
    INDEX idx_dates (start_date, planned_end_date),
    INDEX idx_created_at (created_at DESC)
) COMMENT='å¸¦æ•™é¡¹ç›®ä¸»è¡¨';
```

#### **2. å¸ˆå¾’å…³ç³»è¡¨ï¼šmentorship_relationships**
```sql
-- å¸ˆå¾’å…³ç³»è¡¨ï¼ˆåŸºäºå‰ç«¯ProjectMentorRelationshipï¼‰
CREATE TABLE mentorship_relationships (
    id VARCHAR(36) PRIMARY KEY DEFAULT (UUID()),
    
    -- å…³è”é¡¹ç›®
    project_id VARCHAR(36) NOT NULL COMMENT 'å…³è”é¡¹ç›®IDï¼ˆåŸ¹è®­é¡¹ç›®æˆ–å¸¦æ•™é¡¹ç›®ï¼‰',
    project_type ENUM('training_project', 'mentorship_project') NOT NULL COMMENT 'é¡¹ç›®ç±»å‹',
    
    -- å¸ˆå¾’ä¿¡æ¯
    mentor_id VARCHAR(36) NOT NULL COMMENT 'å¯¼å¸ˆID',
    mentor_name VARCHAR(100) NOT NULL COMMENT 'å¯¼å¸ˆå§“å',
    mentor_type ENUM('department_assigned', 'academy_certified', 'external') NOT NULL COMMENT 'å¯¼å¸ˆç±»å‹',
    
    student_id VARCHAR(36) NOT NULL COMMENT 'å­¦å‘˜ID',
    student_name VARCHAR(100) NOT NULL COMMENT 'å­¦å‘˜å§“å',
    
    -- å…³ç³»å±æ€§
    relationship_type ENUM('one_to_one', 'one_to_many', 'group_mentorship') DEFAULT 'one_to_one' COMMENT 'å…³ç³»ç±»å‹',
    scope ENUM('full_project', 'specific_phase', 'skill_specific') NOT NULL COMMENT 'å¸¦æ•™èŒƒå›´',
    
    -- åŒ¹é…ä¿¡æ¯
    matching_score DECIMAL(3,2) COMMENT 'åŒ¹é…è¯„åˆ†ï¼ˆ1-5ï¼‰',
    matching_type ENUM('manual', 'smart_assisted', 'auto_assigned') NOT NULL COMMENT 'åŒ¹é…æ–¹å¼',
    matching_reasons JSON DEFAULT ('[]') COMMENT 'åŒ¹é…åŸå› åˆ—è¡¨',
    matching_criteria JSON DEFAULT ('{}') COMMENT 'åŒ¹é…æ ‡å‡†',
    
    -- æ—¶é—´ç®¡ç†
    established_date DATE NOT NULL COMMENT 'å»ºç«‹æ—¥æœŸ',
    expected_duration INTEGER NOT NULL COMMENT 'é¢„æœŸæ—¶é•¿ï¼ˆæœˆï¼‰',
    actual_duration INTEGER COMMENT 'å®é™…æ—¶é•¿ï¼ˆæœˆï¼‰',
    last_interaction_date DATE COMMENT 'æœ€åäº¤äº’æ—¥æœŸ',
    
    -- å…³ç³»çŠ¶æ€
    status ENUM('active', 'paused', 'completed', 'terminated') DEFAULT 'active' COMMENT 'å…³ç³»çŠ¶æ€',
    termination_reason TEXT COMMENT 'ç»ˆæ­¢åŸå› ',
    termination_date DATE COMMENT 'ç»ˆæ­¢æ—¥æœŸ',
    
    -- è¿›åº¦ç»Ÿè®¡
    total_interactions INTEGER DEFAULT 0 COMMENT 'æ€»äº¤äº’æ¬¡æ•°',
    completed_milestones INTEGER DEFAULT 0 COMMENT 'å®Œæˆé‡Œç¨‹ç¢‘æ•°',
    total_milestones INTEGER DEFAULT 0 COMMENT 'æ€»é‡Œç¨‹ç¢‘æ•°',
    
    -- è¯„ä»·ä¿¡æ¯
    mutual_satisfaction DECIMAL(3,2) COMMENT 'åŒæ–¹æ»¡æ„åº¦ï¼ˆ1-5ï¼‰',
    effectiveness_rating DECIMAL(3,2) COMMENT 'æœ‰æ•ˆæ€§è¯„åˆ†ï¼ˆ1-5ï¼‰',
    
    -- å®¡è®¡å­—æ®µ
    created_by VARCHAR(36) NOT NULL COMMENT 'åˆ›å»ºäººID',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    -- å¤–é”®çº¦æŸ
    FOREIGN KEY (mentor_id) REFERENCES users(id),
    FOREIGN KEY (student_id) REFERENCES users(id),
    FOREIGN KEY (created_by) REFERENCES users(id),
    
    -- å”¯ä¸€çº¦æŸï¼šåŒä¸€é¡¹ç›®å†…å¸ˆå¾’å…³ç³»å”¯ä¸€
    UNIQUE KEY uk_project_mentor_student (project_id, mentor_id, student_id),
    
    -- ç´¢å¼•
    INDEX idx_mentor_active (mentor_id, status),
    INDEX idx_student_active (student_id, status),
    INDEX idx_project (project_id),
    INDEX idx_status_date (status, established_date),
    INDEX idx_matching_type (matching_type)
) COMMENT='å¸ˆå¾’å…³ç³»è¡¨';
```

#### **3. å¸¦æ•™é˜¶æ®µè¡¨ï¼šmentorship_phases**
```sql
-- å¸¦æ•™é˜¶æ®µè¡¨
CREATE TABLE mentorship_phases (
    id VARCHAR(36) PRIMARY KEY DEFAULT (UUID()),
    
    -- å…³è”é¡¹ç›®
    project_id VARCHAR(36) NOT NULL COMMENT 'å¸¦æ•™é¡¹ç›®ID',
    
    -- é˜¶æ®µåŸºæœ¬ä¿¡æ¯
    name VARCHAR(255) NOT NULL COMMENT 'é˜¶æ®µåç§°',
    description TEXT COMMENT 'é˜¶æ®µæè¿°',
    phase_number INTEGER NOT NULL COMMENT 'é˜¶æ®µåºå·',
    
    -- æ—¶é—´å®‰æ’
    planned_duration INTEGER NOT NULL COMMENT 'è®¡åˆ’æ—¶é•¿ï¼ˆå¤©ï¼‰',
    actual_duration INTEGER COMMENT 'å®é™…æ—¶é•¿ï¼ˆå¤©ï¼‰',
    start_date DATE COMMENT 'å¼€å§‹æ—¥æœŸ',
    end_date DATE COMMENT 'ç»“æŸæ—¥æœŸ',
    
    -- é˜¶æ®µå†…å®¹
    objectives JSON DEFAULT ('[]') COMMENT 'é˜¶æ®µç›®æ ‡',
    expected_outcomes JSON DEFAULT ('[]') COMMENT 'é¢„æœŸæˆæœ',
    key_activities JSON DEFAULT ('[]') COMMENT 'å…³é”®æ´»åŠ¨',
    success_criteria JSON DEFAULT ('[]') COMMENT 'æˆåŠŸæ ‡å‡†',
    
    -- è¿›åº¦çŠ¶æ€
    status ENUM('pending', 'active', 'completed', 'skipped') DEFAULT 'pending' COMMENT 'é˜¶æ®µçŠ¶æ€',
    progress INTEGER DEFAULT 0 COMMENT 'é˜¶æ®µè¿›åº¦ï¼ˆ0-100ï¼‰',
    completion_rate DECIMAL(5,2) DEFAULT 0.00 COMMENT 'å®Œæˆç‡',
    
    -- è¯„ä»·ä¿¡æ¯
    phase_rating DECIMAL(3,2) COMMENT 'é˜¶æ®µè¯„åˆ†ï¼ˆ1-5ï¼‰',
    mentor_feedback TEXT COMMENT 'å¯¼å¸ˆåé¦ˆ',
    student_feedback TEXT COMMENT 'å­¦å‘˜åé¦ˆ',
    
    -- ä»»åŠ¡ç»Ÿè®¡
    total_tasks INTEGER DEFAULT 0 COMMENT 'æ€»ä»»åŠ¡æ•°',
    completed_tasks INTEGER DEFAULT 0 COMMENT 'å·²å®Œæˆä»»åŠ¡æ•°',
    
    -- å®¡è®¡å­—æ®µ
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    completed_at TIMESTAMP COMMENT 'å®Œæˆæ—¶é—´',
    
    -- å¤–é”®çº¦æŸ
    FOREIGN KEY (project_id) REFERENCES mentorship_projects(id) ON DELETE CASCADE,
    
    -- ç´¢å¼•
    INDEX idx_project_phase (project_id, phase_number),
    INDEX idx_status (status),
    INDEX idx_dates (start_date, end_date)
) COMMENT='å¸¦æ•™é˜¶æ®µè¡¨';
```

#### **4. å¸¦æ•™ä»»åŠ¡è¡¨ï¼šmentorship_tasks**
```sql
-- å¸¦æ•™ä»»åŠ¡è¡¨
CREATE TABLE mentorship_tasks (
    id VARCHAR(36) PRIMARY KEY DEFAULT (UUID()),
    
    -- å…³è”ä¿¡æ¯
    project_id VARCHAR(36) NOT NULL COMMENT 'å¸¦æ•™é¡¹ç›®ID',
    phase_id VARCHAR(36) COMMENT 'æ‰€å±é˜¶æ®µID',
    
    -- ä»»åŠ¡åŸºæœ¬ä¿¡æ¯
    title VARCHAR(255) NOT NULL COMMENT 'ä»»åŠ¡æ ‡é¢˜',
    description TEXT COMMENT 'ä»»åŠ¡æè¿°',
    task_type ENUM('learning', 'practice', 'assessment', 'discussion', 'milestone') NOT NULL COMMENT 'ä»»åŠ¡ç±»å‹',
    priority ENUM('low', 'medium', 'high', 'urgent') DEFAULT 'medium' COMMENT 'ä¼˜å…ˆçº§',
    
    -- æ—¶é—´å®‰æ’
    estimated_hours INTEGER COMMENT 'é¢„è®¡è€—æ—¶ï¼ˆå°æ—¶ï¼‰',
    actual_hours INTEGER COMMENT 'å®é™…è€—æ—¶ï¼ˆå°æ—¶ï¼‰',
    due_date DATE COMMENT 'æˆªæ­¢æ—¥æœŸ',
    started_at TIMESTAMP COMMENT 'å¼€å§‹æ—¶é—´',
    completed_at TIMESTAMP COMMENT 'å®Œæˆæ—¶é—´',
    
    -- ä»»åŠ¡çŠ¶æ€
    status ENUM('pending', 'in_progress', 'completed', 'overdue', 'cancelled') DEFAULT 'pending' COMMENT 'ä»»åŠ¡çŠ¶æ€',
    progress INTEGER DEFAULT 0 COMMENT 'å®Œæˆè¿›åº¦ï¼ˆ0-100ï¼‰',
    
    -- ä»»åŠ¡é…ç½®
    requirements JSON DEFAULT ('[]') COMMENT 'ä»»åŠ¡è¦æ±‚',
    deliverables JSON DEFAULT ('[]') COMMENT 'äº¤ä»˜ç‰©',
    resources JSON DEFAULT ('[]') COMMENT 'ç›¸å…³èµ„æº',
    evaluation_criteria JSON DEFAULT ('[]') COMMENT 'è¯„ä»·æ ‡å‡†',
    
    -- è§’è‰²åˆ†å·¥
    assigned_to ENUM('student', 'mentor', 'both') DEFAULT 'student' COMMENT 'ä»»åŠ¡åˆ†é…å¯¹è±¡',
    mentor_responsibilities TEXT COMMENT 'å¯¼å¸ˆèŒè´£',
    student_responsibilities TEXT COMMENT 'å­¦å‘˜èŒè´£',
    
    -- è¯„ä»·ä¿¡æ¯
    task_rating DECIMAL(3,2) COMMENT 'ä»»åŠ¡è¯„åˆ†ï¼ˆ1-5ï¼‰',
    feedback TEXT COMMENT 'åé¦ˆæ„è§',
    lessons_learned TEXT COMMENT 'ç»éªŒæ€»ç»“',
    
    -- å…³è”ä¿¡æ¯
    related_training_task_id VARCHAR(36) COMMENT 'å…³è”çš„åŸ¹è®­ä»»åŠ¡ID',
    predecessor_task_ids JSON DEFAULT ('[]') COMMENT 'å‰ç½®ä»»åŠ¡IDåˆ—è¡¨',
    
    -- å®¡è®¡å­—æ®µ
    created_by VARCHAR(36) NOT NULL COMMENT 'åˆ›å»ºäººID',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    -- å¤–é”®çº¦æŸ
    FOREIGN KEY (project_id) REFERENCES mentorship_projects(id) ON DELETE CASCADE,
    FOREIGN KEY (phase_id) REFERENCES mentorship_phases(id) ON DELETE SET NULL,
    FOREIGN KEY (created_by) REFERENCES users(id),
    
    -- ç´¢å¼•
    INDEX idx_project_status (project_id, status),
    INDEX idx_phase_task (phase_id, task_type),
    INDEX idx_assigned_to (assigned_to, status),
    INDEX idx_due_date (due_date),
    INDEX idx_priority (priority, status)
) COMMENT='å¸¦æ•™ä»»åŠ¡è¡¨';
```

#### **5. å¸ˆå¾’äº¤äº’è¡¨ï¼šmentorship_interactions**
```sql
-- å¸ˆå¾’äº¤äº’è®°å½•è¡¨
CREATE TABLE mentorship_interactions (
    id VARCHAR(36) PRIMARY KEY DEFAULT (UUID()),
    
    -- å…³è”ä¿¡æ¯
    relationship_id VARCHAR(36) NOT NULL COMMENT 'å¸ˆå¾’å…³ç³»ID',
    project_id VARCHAR(36) NOT NULL COMMENT 'å¸¦æ•™é¡¹ç›®ID',
    
    -- äº¤äº’åŸºæœ¬ä¿¡æ¯
    interaction_type ENUM('meeting', 'review', 'guidance', 'assessment', 'discussion', 'feedback') NOT NULL COMMENT 'äº¤äº’ç±»å‹',
    title VARCHAR(255) NOT NULL COMMENT 'äº¤äº’ä¸»é¢˜',
    description TEXT COMMENT 'äº¤äº’æè¿°',
    
    -- æ—¶é—´ä¿¡æ¯
    interaction_date DATE NOT NULL COMMENT 'äº¤äº’æ—¥æœŸ',
    start_time TIME COMMENT 'å¼€å§‹æ—¶é—´',
    end_time TIME COMMENT 'ç»“æŸæ—¶é—´',
    duration INTEGER COMMENT 'æŒç»­æ—¶é—´ï¼ˆåˆ†é’Ÿï¼‰',
    
    -- åœ°ç‚¹å’Œæ–¹å¼
    location VARCHAR(255) COMMENT 'äº¤äº’åœ°ç‚¹',
    method ENUM('face_to_face', 'online', 'phone', 'email', 'instant_message') NOT NULL COMMENT 'äº¤äº’æ–¹å¼',
    
    -- å‚ä¸è€…
    participants JSON DEFAULT ('[]') COMMENT 'å‚ä¸è€…åˆ—è¡¨',
    initiator ENUM('mentor', 'student', 'system') NOT NULL COMMENT 'å‘èµ·æ–¹',
    
    -- äº¤äº’å†…å®¹
    topics JSON DEFAULT ('[]') COMMENT 'è®¨è®ºè¯é¢˜',
    content TEXT NOT NULL COMMENT 'äº¤äº’å†…å®¹è®°å½•',
    action_items JSON DEFAULT ('[]') COMMENT 'è¡ŒåŠ¨é¡¹',
    
    -- é™„ä»¶å’Œèµ„æº
    attachments JSON DEFAULT ('[]') COMMENT 'é™„ä»¶åˆ—è¡¨',
    shared_resources JSON DEFAULT ('[]') COMMENT 'å…±äº«èµ„æº',
    
    -- è¯„ä»·ä¿¡æ¯
    effectiveness_rating DECIMAL(3,2) COMMENT 'äº¤äº’æœ‰æ•ˆæ€§è¯„åˆ†ï¼ˆ1-5ï¼‰',
    mentor_satisfaction DECIMAL(3,2) COMMENT 'å¯¼å¸ˆæ»¡æ„åº¦ï¼ˆ1-5ï¼‰',
    student_satisfaction DECIMAL(3,2) COMMENT 'å­¦å‘˜æ»¡æ„åº¦ï¼ˆ1-5ï¼‰',
    
    -- è·Ÿè¿›è®¡åˆ’
    follow_up_needed BOOLEAN DEFAULT FALSE COMMENT 'æ˜¯å¦éœ€è¦è·Ÿè¿›',
    next_interaction_planned DATE COMMENT 'è®¡åˆ’ä¸‹æ¬¡äº¤äº’æ—¥æœŸ',
    follow_up_notes TEXT COMMENT 'è·Ÿè¿›å¤‡æ³¨',
    
    -- å®¡è®¡å­—æ®µ
    recorded_by VARCHAR(36) NOT NULL COMMENT 'è®°å½•äººID',
    verified_by VARCHAR(36) COMMENT 'ç¡®è®¤äººID',
    verified_at TIMESTAMP COMMENT 'ç¡®è®¤æ—¶é—´',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    -- å¤–é”®çº¦æŸ
    FOREIGN KEY (relationship_id) REFERENCES mentorship_relationships(id) ON DELETE CASCADE,
    FOREIGN KEY (project_id) REFERENCES mentorship_projects(id) ON DELETE CASCADE,
    FOREIGN KEY (recorded_by) REFERENCES users(id),
    FOREIGN KEY (verified_by) REFERENCES users(id),
    
    -- ç´¢å¼•
    INDEX idx_relationship_date (relationship_id, interaction_date DESC),
    INDEX idx_project_type (project_id, interaction_type),
    INDEX idx_date_range (interaction_date, start_time),
    INDEX idx_method_type (method, interaction_type)
) COMMENT='å¸ˆå¾’äº¤äº’è®°å½•è¡¨';
```

#### **6. å¸¦æ•™è¯„ä»·è¡¨ï¼šmentorship_evaluations**
```sql
-- å¸¦æ•™è¯„ä»·è¡¨
CREATE TABLE mentorship_evaluations (
    id VARCHAR(36) PRIMARY KEY DEFAULT (UUID()),
    
    -- å…³è”ä¿¡æ¯
    project_id VARCHAR(36) NOT NULL COMMENT 'å¸¦æ•™é¡¹ç›®ID',
    relationship_id VARCHAR(36) NOT NULL COMMENT 'å¸ˆå¾’å…³ç³»ID',
    phase_id VARCHAR(36) COMMENT 'é˜¶æ®µIDï¼ˆé˜¶æ®µæ€§è¯„ä»·ï¼‰',
    
    -- è¯„ä»·åŸºæœ¬ä¿¡æ¯
    evaluation_type ENUM('phase', 'milestone', 'final', 'periodic', 'ad_hoc') NOT NULL COMMENT 'è¯„ä»·ç±»å‹',
    evaluation_title VARCHAR(255) NOT NULL COMMENT 'è¯„ä»·æ ‡é¢˜',
    evaluation_period VARCHAR(100) COMMENT 'è¯„ä»·å‘¨æœŸ',
    
    -- è¯„ä»·è€…ä¿¡æ¯
    evaluator_id VARCHAR(36) NOT NULL COMMENT 'è¯„ä»·è€…ID',
    evaluator_type ENUM('mentor', 'student', 'supervisor', 'external') NOT NULL COMMENT 'è¯„ä»·è€…ç±»å‹',
    evaluator_name VARCHAR(100) NOT NULL COMMENT 'è¯„ä»·è€…å§“å',
    
    -- è¢«è¯„ä»·è€…ä¿¡æ¯
    evaluatee_id VARCHAR(36) NOT NULL COMMENT 'è¢«è¯„ä»·è€…ID',
    evaluatee_type ENUM('mentor', 'student') NOT NULL COMMENT 'è¢«è¯„ä»·è€…ç±»å‹',
    evaluatee_name VARCHAR(100) NOT NULL COMMENT 'è¢«è¯„ä»·è€…å§“å',
    
    -- è¯„ä»·ç»´åº¦å’Œåˆ†æ•°
    technical_skills_score DECIMAL(3,2) COMMENT 'ä¸“ä¸šæŠ€èƒ½è¯„åˆ†ï¼ˆ1-5ï¼‰',
    communication_score DECIMAL(3,2) COMMENT 'æ²Ÿé€šèƒ½åŠ›è¯„åˆ†ï¼ˆ1-5ï¼‰',
    learning_attitude_score DECIMAL(3,2) COMMENT 'å­¦ä¹ æ€åº¦è¯„åˆ†ï¼ˆ1-5ï¼‰',
    problem_solving_score DECIMAL(3,2) COMMENT 'é—®é¢˜è§£å†³è¯„åˆ†ï¼ˆ1-5ï¼‰',
    collaboration_score DECIMAL(3,2) COMMENT 'åä½œèƒ½åŠ›è¯„åˆ†ï¼ˆ1-5ï¼‰',
    overall_score DECIMAL(3,2) NOT NULL COMMENT 'æ€»ä½“è¯„åˆ†ï¼ˆ1-5ï¼‰',
    
    -- è‡ªå®šä¹‰è¯„ä»·ç»´åº¦
    custom_criteria JSON DEFAULT ('{}') COMMENT 'è‡ªå®šä¹‰è¯„ä»·æ ‡å‡†å’Œåˆ†æ•°',
    
    -- å®šæ€§è¯„ä»·
    strengths TEXT COMMENT 'ä¼˜åŠ¿å’Œäº®ç‚¹',
    improvement_areas TEXT COMMENT 'æ”¹è¿›é¢†åŸŸ',
    specific_feedback TEXT NOT NULL COMMENT 'å…·ä½“åé¦ˆæ„è§',
    suggestions TEXT COMMENT 'å»ºè®®å’Œå»ºè®®',
    
    -- è¿›å±•è¯„ä¼°
    goal_achievement JSON DEFAULT ('{}') COMMENT 'ç›®æ ‡è¾¾æˆæƒ…å†µ',
    progress_assessment TEXT COMMENT 'è¿›å±•è¯„ä¼°',
    milestone_completion JSON DEFAULT ('[]') COMMENT 'é‡Œç¨‹ç¢‘å®Œæˆæƒ…å†µ',
    
    -- ä¸‹é˜¶æ®µè§„åˆ’
    next_phase_goals JSON DEFAULT ('[]') COMMENT 'ä¸‹é˜¶æ®µç›®æ ‡',
    recommended_actions JSON DEFAULT ('[]') COMMENT 'å»ºè®®è¡ŒåŠ¨',
    focus_areas JSON DEFAULT ('[]') COMMENT 'é‡ç‚¹å…³æ³¨é¢†åŸŸ',
    
    -- è¯„ä»·çŠ¶æ€
    status ENUM('draft', 'submitted', 'reviewed', 'finalized') DEFAULT 'draft' COMMENT 'è¯„ä»·çŠ¶æ€',
    is_anonymous BOOLEAN DEFAULT FALSE COMMENT 'æ˜¯å¦åŒ¿åè¯„ä»·',
    visibility ENUM('private', 'shared', 'public') DEFAULT 'shared' COMMENT 'å¯è§æ€§',
    
    -- æ—¶é—´ä¿¡æ¯
    evaluation_date DATE NOT NULL COMMENT 'è¯„ä»·æ—¥æœŸ',
    submitted_at TIMESTAMP COMMENT 'æäº¤æ—¶é—´',
    reviewed_at TIMESTAMP COMMENT 'å®¡æ ¸æ—¶é—´',
    finalized_at TIMESTAMP COMMENT 'æœ€ç»ˆç¡®è®¤æ—¶é—´',
    
    -- å®¡è®¡å­—æ®µ
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    -- å¤–é”®çº¦æŸ
    FOREIGN KEY (project_id) REFERENCES mentorship_projects(id) ON DELETE CASCADE,
    FOREIGN KEY (relationship_id) REFERENCES mentorship_relationships(id) ON DELETE CASCADE,
    FOREIGN KEY (phase_id) REFERENCES mentorship_phases(id) ON DELETE SET NULL,
    FOREIGN KEY (evaluator_id) REFERENCES users(id),
    FOREIGN KEY (evaluatee_id) REFERENCES users(id),
    
    -- ç´¢å¼•
    INDEX idx_project_type (project_id, evaluation_type),
    INDEX idx_relationship_date (relationship_id, evaluation_date DESC),
    INDEX idx_evaluator (evaluator_id, evaluator_type),
    INDEX idx_evaluatee (evaluatee_id, evaluatee_type),
    INDEX idx_status (status, submitted_at)
) COMMENT='å¸¦æ•™è¯„ä»·è¡¨';
```

#### **7. å¸¦æ•™è®¡åˆ’è¡¨ï¼šmentorship_plans**
```sql
-- å¸¦æ•™è®¡åˆ’è¡¨
CREATE TABLE mentorship_plans (
    id VARCHAR(36) PRIMARY KEY DEFAULT (UUID()),
    
    -- å…³è”ä¿¡æ¯
    project_id VARCHAR(36) NOT NULL COMMENT 'å¸¦æ•™é¡¹ç›®ID',
    relationship_id VARCHAR(36) NOT NULL COMMENT 'å¸ˆå¾’å…³ç³»ID',
    
    -- è®¡åˆ’åŸºæœ¬ä¿¡æ¯
    plan_title VARCHAR(255) NOT NULL COMMENT 'è®¡åˆ’æ ‡é¢˜',
    plan_description TEXT COMMENT 'è®¡åˆ’æè¿°',
    plan_version VARCHAR(50) DEFAULT 'v1.0' COMMENT 'è®¡åˆ’ç‰ˆæœ¬',
    
    -- è®¡åˆ’ç›®æ ‡
    overall_goal TEXT NOT NULL COMMENT 'æ€»ä½“ç›®æ ‡',
    specific_objectives JSON DEFAULT ('[]') COMMENT 'å…·ä½“ç›®æ ‡åˆ—è¡¨',
    success_metrics JSON DEFAULT ('[]') COMMENT 'æˆåŠŸæŒ‡æ ‡',
    expected_outcomes JSON DEFAULT ('[]') COMMENT 'é¢„æœŸæˆæœ',
    
    -- æ—¶é—´è§„åˆ’
    total_duration INTEGER NOT NULL COMMENT 'æ€»æ—¶é•¿ï¼ˆå¤©ï¼‰',
    planned_start_date DATE NOT NULL COMMENT 'è®¡åˆ’å¼€å§‹æ—¥æœŸ',
    planned_end_date DATE NOT NULL COMMENT 'è®¡åˆ’ç»“æŸæ—¥æœŸ',
    actual_start_date DATE COMMENT 'å®é™…å¼€å§‹æ—¥æœŸ',
    actual_end_date DATE COMMENT 'å®é™…ç»“æŸæ—¥æœŸ',
    
    -- é˜¶æ®µè§„åˆ’
    phase_planning JSON DEFAULT ('[]') COMMENT 'é˜¶æ®µè§„åˆ’è¯¦æƒ…',
    milestone_planning JSON DEFAULT ('[]') COMMENT 'é‡Œç¨‹ç¢‘è§„åˆ’',
    
    -- å­¦ä¹ å†…å®¹è§„åˆ’
    learning_topics JSON DEFAULT ('[]') COMMENT 'å­¦ä¹ ä¸»é¢˜',
    skill_development_areas JSON DEFAULT ('[]') COMMENT 'æŠ€èƒ½å‘å±•é¢†åŸŸ',
    knowledge_requirements JSON DEFAULT ('[]') COMMENT 'çŸ¥è¯†è¦æ±‚',
    
    -- æ–¹æ³•å’Œèµ„æº
    teaching_methods JSON DEFAULT ('[]') COMMENT 'æ•™å­¦æ–¹æ³•',
    learning_activities JSON DEFAULT ('[]') COMMENT 'å­¦ä¹ æ´»åŠ¨',
    required_resources JSON DEFAULT ('[]') COMMENT 'æ‰€éœ€èµ„æº',
    recommended_materials JSON DEFAULT ('[]') COMMENT 'æ¨èææ–™',
    
    -- è¯„ä¼°è§„åˆ’
    assessment_schedule JSON DEFAULT ('[]') COMMENT 'è¯„ä¼°æ—¶é—´è¡¨',
    evaluation_criteria JSON DEFAULT ('[]') COMMENT 'è¯„ä»·æ ‡å‡†',
    feedback_mechanisms JSON DEFAULT ('[]') COMMENT 'åé¦ˆæœºåˆ¶',
    
    -- æ²Ÿé€šè§„åˆ’
    communication_schedule JSON DEFAULT ('[]') COMMENT 'æ²Ÿé€šå®‰æ’',
    meeting_frequency VARCHAR(100) COMMENT 'ä¼šè®®é¢‘ç‡',
    preferred_communication_methods JSON DEFAULT ('[]') COMMENT 'é¦–é€‰æ²Ÿé€šæ–¹å¼',
    
    -- è®¡åˆ’çŠ¶æ€
    status ENUM('draft', 'approved', 'active', 'completed', 'revised', 'cancelled') DEFAULT 'draft' COMMENT 'è®¡åˆ’çŠ¶æ€',
    approval_status ENUM('pending', 'approved', 'rejected') DEFAULT 'pending' COMMENT 'å®¡æ‰¹çŠ¶æ€',
    
    -- è¿›åº¦è·Ÿè¸ª
    completion_rate DECIMAL(5,2) DEFAULT 0.00 COMMENT 'å®Œæˆç‡',
    current_phase INTEGER DEFAULT 1 COMMENT 'å½“å‰é˜¶æ®µ',
    
    -- å˜æ›´ç®¡ç†
    revision_history JSON DEFAULT ('[]') COMMENT 'ä¿®è®¢å†å²',
    change_reasons JSON DEFAULT ('[]') COMMENT 'å˜æ›´åŸå› ',
    
    -- å®¡æ‰¹ä¿¡æ¯
    created_by VARCHAR(36) NOT NULL COMMENT 'åˆ¶å®šäººID',
    approved_by VARCHAR(36) COMMENT 'å®¡æ‰¹äººID',
    approved_at TIMESTAMP COMMENT 'å®¡æ‰¹æ—¶é—´',
    
    -- å®¡è®¡å­—æ®µ
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    -- å¤–é”®çº¦æŸ
    FOREIGN KEY (project_id) REFERENCES mentorship_projects(id) ON DELETE CASCADE,
    FOREIGN KEY (relationship_id) REFERENCES mentorship_relationships(id) ON DELETE CASCADE,
    FOREIGN KEY (created_by) REFERENCES users(id),
    FOREIGN KEY (approved_by) REFERENCES users(id),
    
    -- ç´¢å¼•
    INDEX idx_project_status (project_id, status),
    INDEX idx_relationship (relationship_id),
    INDEX idx_approval (approval_status, approved_at),
    INDEX idx_dates (planned_start_date, planned_end_date)
) COMMENT='å¸¦æ•™è®¡åˆ’è¡¨';
```

---

## 2.3 æ•°æ®å…³ç³»ä¸çº¦æŸ

### ğŸ”— **æ ¸å¿ƒæ•°æ®å…³ç³»å›¾**

```mermaid
erDiagram
    training_projects ||--o{ mentorship_projects : "è‡ªåŠ¨åˆ›å»º"
    users ||--o{ mentorship_projects : "å¯¼å¸ˆ"
    users ||--o{ mentorship_projects : "å­¦å‘˜"
    
    mentorship_projects ||--|| mentorship_relationships : "ä¸€å¯¹ä¸€å…³ç³»"
    mentorship_projects ||--o{ mentorship_phases : "åŒ…å«å¤šä¸ªé˜¶æ®µ"
    mentorship_projects ||--|| mentorship_plans : "åˆ¶å®šè®¡åˆ’"
    
    mentorship_phases ||--o{ mentorship_tasks : "åŒ…å«ä»»åŠ¡"
    mentorship_relationships ||--o{ mentorship_interactions : "äº¤äº’è®°å½•"
    mentorship_projects ||--o{ mentorship_evaluations : "è¯„ä»·è®°å½•"
    
    user_growth_profiles ||--o{ mentorship_projects : "å…³è”æˆé•¿æ¡£æ¡ˆ"
```

### ğŸ“ **æ•°æ®å®Œæ•´æ€§çº¦æŸ**

```sql
-- 1. å¸ˆå¾’å…³ç³»çº¦æŸï¼šå¯¼å¸ˆå’Œå­¦å‘˜ä¸èƒ½æ˜¯åŒä¸€äºº
ALTER TABLE mentorship_relationships 
ADD CONSTRAINT chk_mentor_student_different 
CHECK (mentor_id != student_id);

-- 2. é¡¹ç›®æ—¶é—´çº¦æŸï¼šç»“æŸæ—¶é—´å¿…é¡»æ™šäºå¼€å§‹æ—¶é—´
ALTER TABLE mentorship_projects 
ADD CONSTRAINT chk_project_dates 
CHECK (planned_end_date >= start_date);

-- 3. è¯„åˆ†çº¦æŸï¼šè¯„åˆ†å¿…é¡»åœ¨1-5ä¹‹é—´
ALTER TABLE mentorship_evaluations 
ADD CONSTRAINT chk_score_range 
CHECK (overall_score BETWEEN 1 AND 5);

-- 4. è¿›åº¦çº¦æŸï¼šè¿›åº¦å¿…é¡»åœ¨0-100ä¹‹é—´
ALTER TABLE mentorship_projects 
ADD CONSTRAINT chk_progress_range 
CHECK (progress BETWEEN 0 AND 100);

-- 5. é˜¶æ®µåºå·çº¦æŸï¼šåŒä¸€é¡¹ç›®å†…é˜¶æ®µåºå·ä¸é‡å¤
ALTER TABLE mentorship_phases 
ADD CONSTRAINT uk_project_phase_number 
UNIQUE (project_id, phase_number);
```

---

## 3.1 åŸºäºå‰ç«¯å¥‘çº¦çš„APIè®¾è®¡

### ğŸ¯ **APIè®¾è®¡åŸåˆ™**

#### **3.1.1 å¥‘çº¦ä¼˜å…ˆå¼€å‘**
```typescript
// ä¸¥æ ¼æŒ‰ç…§å‰ç«¯å·²å®šä¹‰çš„APIå¥‘çº¦å®ç°
interface FrontendAPIContract {
  source: 'training-system-frontend/src/api/modules/mentorship.ts'
  principle: 'åç«¯å®Œå…¨æŒ‰ç…§å‰ç«¯APIå®šä¹‰å®ç°ï¼Œç¡®ä¿é›¶é€‚é…æˆæœ¬'
  benefits: ['æ— éœ€å‰ç«¯ä¿®æ”¹', 'å³æ’å³ç”¨', 'ç±»å‹å®‰å…¨', 'å¿«é€Ÿé›†æˆ']
}
```

#### **3.1.2 RESTful APIè§„èŒƒ**
```typescript
// å¸¦æ•™ç®¡ç†APIå‘½åè§„èŒƒ
interface MentorshipAPIConvention {
  basePath: '/api/mentorship'
  
  resources: {
    projects: '/api/mentorship/projects'           // å¸¦æ•™é¡¹ç›®
    relationships: '/api/mentorship/relationships' // å¸ˆå¾’å…³ç³»
    plans: '/api/mentorship/plans'                // å¸¦æ•™è®¡åˆ’
    evaluations: '/api/mentorship/evaluations'    // å¸¦æ•™è¯„ä»·
    interactions: '/api/mentorship/interactions'  // äº¤äº’è®°å½•
  }
  
  workbench: {
    mentor: '/api/workbench/mentor'               // å¯¼å¸ˆå·¥ä½œå°
    admin: '/api/workbench/admin/mentorship'     // ç®¡ç†å‘˜å·¥ä½œå°
  }
  
  integration: {
    growthProfile: '/api/growth-profile/{userId}/mentorship' // æˆé•¿æ¡£æ¡ˆé›†æˆ
    training: '/api/projects/{projectId}/mentorship'         // åŸ¹è®­é¡¹ç›®é›†æˆ
  }
}
```

---

## 3.2 å®Œæ•´APIæ¥å£æ¸…å•

### ğŸ“‹ **APIæ¥å£è®¾è®¡è¡¨æ ¼**

| **æ¨¡å—** | **åŠŸèƒ½** | **æ–¹æ³•** | **è·¯å¾„** | **å‰ç«¯æ¥æº** | **ä¼˜å…ˆçº§** | **å®ŒæˆçŠ¶æ€** | **è¯´æ˜** |
|---------|---------|---------|---------|-------------|-----------|-----------|---------|
| **ğŸ¢ é¡¹ç›®è¯¦æƒ…-å¸¦æ•™** | è·å–é¡¹ç›®å¸ˆå¾’å…³ç³» | GET | `/api/projects/{projectId}/mentorship/relationships` | MentoringManagement.vue | ğŸ”¥ é«˜ | âœ… å·²å®Œæˆ | æŒ‡æ´¾å…³ç³»Tab |
| | åˆ›å»ºå¸ˆå¾’å…³ç³» | POST | `/api/projects/{projectId}/mentorship/relationships` | AssignmentRelationTab.vue | ğŸ”¥ é«˜ | âœ… å·²å®Œæˆ | å¸ˆå¾’é…å¯¹ |
| | è·å–å¸¦æ•™è¿›åº¦ | GET | `/api/projects/{projectId}/mentorship/progress` | StudentTaskProgressTab.vue | ğŸ”¥ é«˜ | âœ… å·²å®Œæˆ | ä»»åŠ¡çŠ¶æ€Tab |
| | è·å–å¸¦æ•™è¯„ä»· | GET | `/api/projects/{projectId}/mentorship/evaluations` | ProjectEvaluationTab.vue | ğŸ”¥ é«˜ | âœ… å·²å®Œæˆ | å¸¦æ•™è¯„ä»·Tab |
| | æäº¤å¸¦æ•™è¯„ä»· | POST | `/api/projects/{projectId}/mentorship/evaluations` | ProjectEvaluationTab.vue | ğŸ”¥ é«˜ | âœ… å·²å®Œæˆ | è¯„ä»·æäº¤ |
| | è·å–å¸¦æ•™æ ‡å‡† | GET | `/api/projects/{projectId}/mentorship/standards` | ProjectStandardsTab.vue | ğŸ“˜ ä¸­ | âœ… å·²å®Œæˆ | å¸¦æ•™æ ‡å‡†Tab |
| **ğŸ“ å¸¦æ•™è€å¸ˆå·¥ä½œå°** | å¯¼å¸ˆå·¥ä½œå°æ¦‚è§ˆ | GET | `/api/workbench/mentor/dashboard` | mentorWorkbench.ts | ğŸ”¥ é«˜ | âœ… å·²å®Œæˆ | å·¥ä½œå°é¦–é¡µ |
| | æˆ‘çš„å­¦å‘˜åˆ—è¡¨ | GET | `/api/workbench/mentor/students` | StudentManagementPanel.vue | ğŸ”¥ é«˜ | âœ… å·²å®Œæˆ | å­¦å‘˜ç®¡ç† |
| | å­¦å‘˜è¯¦æƒ… | GET | `/api/workbench/mentor/students/{studentId}` | StudentManagementPanel.vue | ğŸ”¥ é«˜ | âœ… å·²å®Œæˆ | å­¦å‘˜è¯¦ç»†ä¿¡æ¯ |
| | å¸¦æ•™è®¡åˆ’ç®¡ç† | GET | `/api/workbench/mentor/plans` | MentorshipExecutionPanel.vue | ğŸ”¥ é«˜ | âœ… å·²å®Œæˆ | è®¡åˆ’ç®¡ç†Tab |
| | åˆ›å»ºå¸¦æ•™è®¡åˆ’ | POST | `/api/workbench/mentor/plans` | MentorshipExecutionPanel.vue | ğŸ”¥ é«˜ | âœ… å·²å®Œæˆ | æ–°å»ºè®¡åˆ’ |
| | ä»»åŠ¡åˆ†é…ç®¡ç† | GET | `/api/workbench/mentor/tasks` | MentorshipExecutionPanel.vue | ğŸ”¥ é«˜ | âœ… å·²å®Œæˆ | ä»»åŠ¡åˆ†é…Tab |
| | åˆ›å»ºå¸¦æ•™ä»»åŠ¡ | POST | `/api/workbench/mentor/tasks` | MentorshipExecutionPanel.vue | ğŸ”¥ é«˜ | âœ… å·²å®Œæˆ | ä»»åŠ¡åˆ†é… |
| | é˜¶æ®µè¯„ä»·ç®¡ç† | GET | `/api/workbench/mentor/evaluations` | MentorshipExecutionPanel.vue | ğŸ”¥ é«˜ | âœ… å·²å®Œæˆ | é˜¶æ®µè¯„ä»·Tab |
| | æäº¤é˜¶æ®µè¯„ä»· | POST | `/api/workbench/mentor/evaluations` | MentorshipExecutionPanel.vue | ğŸ”¥ é«˜ | âœ… å·²å®Œæˆ | è¯„ä»·æäº¤ |
| | å¸¦æ•™èµ„æºç®¡ç† | GET | `/api/workbench/mentor/resources` | ResourceToolsPanel.vue | ğŸ“˜ ä¸­ | âœ… å·²å®Œæˆ | èµ„æºå·¥å…·Tab |
| | æ²Ÿé€šè®°å½•ç®¡ç† | GET | `/api/workbench/mentor/communications` | StudentManagementPanel.vue | ğŸ”¥ é«˜ | âœ… å·²å®Œæˆ | æ²Ÿé€šè®°å½•Tab |
| | è®°å½•å¸ˆå¾’äº¤äº’ | POST | `/api/workbench/mentor/interactions` | StudentManagementPanel.vue | ğŸ”¥ é«˜ | âœ… å·²å®Œæˆ | äº¤äº’è®°å½• |
| **ğŸ›ï¸ æ•™åŠ¡å·¥ä½œå°** | å¸¦æ•™é¡¹ç›®æ¦‚è§ˆ | GET | `/api/workbench/admin/mentorship/overview` | workbench.controller.ts | ğŸ”¥ é«˜ | â­• å¾…å®ç° | ç®¡ç†å‘˜ç›‘æ§ |
| | å¸¦æ•™ç»Ÿè®¡æ•°æ® | GET | `/api/workbench/admin/mentorship/statistics` | workbench.controller.ts | ğŸ”¥ é«˜ | â­• å¾…å®ç° | æ•°æ®åˆ†æ |
| | å¸¦æ•™è´¨é‡åˆ†æ | GET | `/api/workbench/admin/mentorship/quality` | workbench.controller.ts | ğŸ“˜ ä¸­ | â­• å¾…å®ç° | è´¨é‡ç®¡ç† |
| | å¯¼å¸ˆå·¥ä½œé‡ç»Ÿè®¡ | GET | `/api/workbench/admin/mentorship/mentor-workload` | workbench.controller.ts | ğŸ“˜ ä¸­ | â­• å¾…å®ç° | å·¥ä½œé‡åˆ†æ |
| **ğŸ“ å­¦ä¹ ä¸­å¿ƒé›†æˆ** | ç”¨æˆ·å¸¦æ•™å†å² | GET | `/api/growth-profile/{userId}/mentorship-history` | growth-profile.ts | ğŸ”¥ é«˜ | âœ… å·²å®Œæˆ | å¸¦æ•™å†å²Tab |
| | æ›´æ–°å¸¦æ•™æ¡£æ¡ˆ | PUT | `/api/growth-profile/{userId}/mentorship-history/{recordId}` | growth-profile.ts | ğŸ“˜ ä¸­ | âœ… å·²å®Œæˆ | æ¡£æ¡ˆæ›´æ–° |
| | å¸¦æ•™æˆé•¿è½¨è¿¹ | GET | `/api/growth-profile/{userId}/mentorship/timeline` | growth-profile.ts | ğŸ“˜ ä¸­ | âœ… å·²å®Œæˆ | æˆé•¿æ—¶é—´çº¿ |
| | ç”¨æˆ·å¸¦æ•™æ¦‚è§ˆ | GET | `/api/growth-profile/{userId}/mentorship/overview` | growth-profile.ts | ğŸ”¥ é«˜ | âœ… å·²å®Œæˆ | å¸¦æ•™æ¦‚è§ˆ |
| | ç”¨æˆ·å¸¦æ•™ç»Ÿè®¡ | GET | `/api/growth-profile/{userId}/mentorship/statistics` | growth-profile.ts | ğŸ“˜ ä¸­ | âœ… å·²å®Œæˆ | å¸¦æ•™æ•°æ®ç»Ÿè®¡ |
| **ğŸ”§ æ ¸å¿ƒAPI** | å¸¦æ•™é¡¹ç›®CRUD | GET/POST/PUT/DELETE | `/api/mentorship/projects/**` | MentorshipModule | ğŸ”¥ é«˜ | âœ… å·²å®Œæˆ | é¡¹ç›®ç®¡ç† |
| | å¸ˆå¾’å…³ç³»CRUD | GET/POST/PUT/DELETE | `/api/mentorship/relationships/**` | MentorshipModule | ğŸ”¥ é«˜ | âœ… å·²å®Œæˆ | å…³ç³»ç®¡ç† |
| | å¸¦æ•™è®¡åˆ’CRUD | GET/POST/PUT/DELETE | `/api/mentorship/plans/**` | MentorshipModule | ğŸ”¥ é«˜ | âœ… å·²å®Œæˆ | è®¡åˆ’ç®¡ç† |
| | å¸¦æ•™è¯„ä»·CRUD | GET/POST/PUT/DELETE | `/api/mentorship/evaluations/**` | MentorshipModule | ğŸ”¥ é«˜ | âœ… å·²å®Œæˆ | è¯„ä»·ç®¡ç† |
| | äº¤äº’è®°å½•CRUD | GET/POST/PUT/DELETE | `/api/mentorship/interactions/**` | MentorshipModule | ğŸ”¥ é«˜ | âœ… å·²å®Œæˆ | äº¤äº’ç®¡ç† |

### ğŸ¯ **APIå®ç°çŠ¶æ€ç»Ÿè®¡**

| **ç±»åˆ«** | **æ¥å£æ•°é‡** | **ä¼˜å…ˆçº§åˆ†å¸ƒ** | **é¢„è®¡å·¥æœŸ** |
|---------|-------------|---------------|-------------|
| **ğŸ”¥ é«˜ä¼˜å…ˆçº§** | 20ä¸ªæ¥å£ | æ ¸å¿ƒåŠŸèƒ½ | 3-4å‘¨ |
| **ğŸ“˜ ä¸­ä¼˜å…ˆçº§** | 12ä¸ªæ¥å£ | æ‰©å±•åŠŸèƒ½ | 2-3å‘¨ |
| **æ€»è®¡** | 32ä¸ªæ¥å£ | å®Œæ•´ç³»ç»Ÿ | 5-7å‘¨ |

---

## 3.3 APIå®ç°ä¼˜å…ˆçº§

### ğŸ”¥ **ç¬¬ä¸€ä¼˜å…ˆçº§ï¼ˆç«‹å³å®ç°ï¼‰**

#### **1. é¡¹ç›®è¯¦æƒ…-å¸¦æ•™ APIï¼ˆå¯¹åº”MentoringManagement.vueï¼‰**
```typescript
// è¿™äº›APIç›´æ¥å¯¹åº”å‰ç«¯å·²å®Œæˆçš„4ä¸ªTabåŠŸèƒ½
@Controller('api/projects/:projectId/mentorship')
export class ProjectMentorshipController {
  // æŒ‡æ´¾å…³ç³»Tab
  @Get('relationships')
  async getProjectRelationships(@Param('projectId') projectId: string) {}
  
  @Post('relationships')
  async createMentorshipRelationship(@Body() createDto: CreateRelationshipDto) {}
  
  // ä»»åŠ¡çŠ¶æ€Tab
  @Get('progress')
  async getMentorshipProgress(@Param('projectId') projectId: string) {}
  
  // å¸¦æ•™è¯„ä»·Tab
  @Get('evaluations')
  async getProjectEvaluations(@Param('projectId') projectId: string) {}
  
  @Post('evaluations')
  async submitEvaluation(@Body() evaluationDto: CreateEvaluationDto) {}
}
```

#### **2. å¯¼å¸ˆå·¥ä½œå° APIï¼ˆå¯¹åº”mentorWorkbench.ts storeï¼‰**
```typescript
@Controller('api/workbench/mentor')
export class MentorWorkbenchController {
  // å·¥ä½œå°æ¦‚è§ˆ
  @Get('dashboard')
  async getMentorDashboard(@CurrentUser() user: User) {}
  
  // å­¦å‘˜ç®¡ç†
  @Get('students')
  async getMyStudents(@CurrentUser() user: User) {}
  
  // å¸¦æ•™æ‰§è¡Œ
  @Get('plans')
  async getMentorshipPlans(@CurrentUser() user: User) {}
  
  @Get('tasks')
  async getMentorshipTasks(@CurrentUser() user: User) {}
  
  // æ²Ÿé€šè®°å½•
  @Post('interactions')
  async recordInteraction(@Body() interactionDto: CreateInteractionDto) {}
}
```

### ğŸ“˜ **ç¬¬äºŒä¼˜å…ˆçº§ï¼ˆåç»­å®ç°ï¼‰**

#### **1. æ•™åŠ¡å·¥ä½œå°é›†æˆ**
```typescript
@Controller('api/workbench/admin/mentorship')
export class AdminMentorshipController {
  @Get('overview')
  async getMentorshipOverview() {}
  
  @Get('statistics')
  async getMentorshipStatistics() {}
}
```

#### **2. å­¦ä¹ ä¸­å¿ƒé›†æˆ**
```typescript
@Controller('api/growth-profile/:userId/mentorship')
export class GrowthProfileMentorshipController {
  @Get('history')
  async getMentorshipHistory(@Param('userId') userId: string) {}
  
  @Get('timeline')
  async getMentorshipTimeline(@Param('userId') userId: string) {}
}
```

---

## 4.1 å¸ˆå¾’å…³ç³»å»ºç«‹æµç¨‹

### ğŸ”„ **è‡ªåŠ¨åŒ–å¸ˆå¾’å…³ç³»å»ºç«‹**

```typescript
class MentorshipAutoAssignmentService {
  
  // åŸ¹è®­é¡¹ç›®å‘å¸ƒåè‡ªåŠ¨åˆ›å»ºå¸ˆå¾’å…³ç³»
  @EventHandler('training.project.published')
  async handleTrainingProjectPublished(event: TrainingProjectPublishedEvent) {
    const project = event.project
    
    // 1. æ£€æŸ¥æ˜¯å¦å¯ç”¨å¸¦æ•™åŠŸèƒ½
    if (!project.mentorshipEnabled) {
      this.logger.info(`é¡¹ç›® ${project.id} æœªå¯ç”¨å¸¦æ•™åŠŸèƒ½ï¼Œè·³è¿‡å¸ˆå¾’å…³ç³»åˆ›å»º`)
      return
    }
    
    // 2. è·å–é¡¹ç›®å‚ä¸è€…
    const students = await this.getProjectStudents(project.id)
    const availableMentors = await this.getAvailableMentors(project)
    
    // 3. æ‰§è¡Œæ™ºèƒ½åŒ¹é…
    const assignments = await this.performIntelligentMatching(students, availableMentors, project)
    
    // 4. åˆ›å»ºå¸ˆå¾’å…³ç³»
    const relationships = await this.createMentorshipRelationships(assignments, project)
    
    // 5. ç”Ÿæˆå¸¦æ•™è®¡åˆ’
    for (const relationship of relationships) {
      await this.generateMentorshipPlan(relationship)
    }
    
    // 6. å‘é€é€šçŸ¥
    await this.notificationService.notifyMentorshipAssignments(relationships)
    
    this.logger.info(`é¡¹ç›® ${project.id} æˆåŠŸåˆ›å»º ${relationships.length} ä¸ªå¸ˆå¾’å…³ç³»`)
  }
  
  // æ™ºèƒ½åŒ¹é…ç®—æ³•
  private async performIntelligentMatching(
    students: Student[], 
    mentors: Mentor[], 
    project: TrainingProject
  ): Promise<MentorshipAssignment[]> {
    const assignments: MentorshipAssignment[] = []
    
    for (const student of students) {
      // è®¡ç®—æ¯ä¸ªå¯¼å¸ˆçš„åŒ¹é…åˆ†æ•°
      const mentorScores = await Promise.all(
        mentors.map(mentor => this.calculateMatchingScore(student, mentor, project))
      )
      
      // é€‰æ‹©æœ€ä½³åŒ¹é…çš„å¯¼å¸ˆ
      const bestMatch = mentorScores.reduce((best, current) => 
        current.score > best.score ? current : best
      )
      
      // æ£€æŸ¥å¯¼å¸ˆå·¥ä½œè´Ÿè·
      if (await this.checkMentorAvailability(bestMatch.mentor, project)) {
        assignments.push({
          studentId: student.id,
          mentorId: bestMatch.mentor.id,
          matchingScore: bestMatch.score,
          matchingReasons: bestMatch.reasons,
          projectId: project.id
        })
        
        // æ›´æ–°å¯¼å¸ˆå·¥ä½œè´Ÿè·
        await this.updateMentorWorkload(bestMatch.mentor.id, 1)
      }
    }
    
    return assignments
  }
  
  // åŒ¹é…åˆ†æ•°è®¡ç®—
  private async calculateMatchingScore(
    student: Student, 
    mentor: Mentor, 
    project: TrainingProject
  ): Promise<MatchingResult> {
    let score = 0
    const reasons: string[] = []
    
    // 1. ä¸“ä¸šé¢†åŸŸåŒ¹é…ï¼ˆæƒé‡ï¼š40%ï¼‰
    const skillMatch = this.calculateSkillMatch(student.learningGoals, mentor.expertise)
    score += skillMatch * 0.4
    if (skillMatch > 0.7) reasons.push('ä¸“ä¸šæŠ€èƒ½é«˜åº¦åŒ¹é…')
    
    // 2. éƒ¨é—¨ç›¸å…³æ€§ï¼ˆæƒé‡ï¼š20%ï¼‰
    const departmentMatch = student.department === mentor.department ? 1 : 0.5
    score += departmentMatch * 0.2
    if (departmentMatch === 1) reasons.push('åŒéƒ¨é—¨å¯¼å¸ˆ')
    
    // 3. å¯¼å¸ˆå†å²è¡¨ç°ï¼ˆæƒé‡ï¼š20%ï¼‰
    const performanceScore = mentor.rating / 5
    score += performanceScore * 0.2
    if (mentor.rating > 4) reasons.push('å¯¼å¸ˆå†å²è¯„ä»·ä¼˜ç§€')
    
    // 4. å·¥ä½œè´Ÿè·ï¼ˆæƒé‡ï¼š20%ï¼‰
    const workloadScore = Math.max(0, 1 - (mentor.currentLoad / mentor.maxLoad))
    score += workloadScore * 0.2
    if (workloadScore > 0.7) reasons.push('å¯¼å¸ˆå·¥ä½œè´Ÿè·é€‚ä¸­')
    
    return { mentor, score, reasons }
  }
}
```

### ğŸ“‹ **æ‰‹åŠ¨å¸ˆå¾’å…³ç³»ç®¡ç†**

```typescript
class MentorshipRelationshipService {
  
  // æ‰‹åŠ¨åˆ›å»ºå¸ˆå¾’å…³ç³»ï¼ˆé¡¹ç›®ç®¡ç†å‘˜ä½¿ç”¨ï¼‰
  async createMentorshipRelationship(dto: CreateMentorshipRelationshipDto): Promise<MentorshipRelationship> {
    const transaction = await this.db.transaction()
    
    try {
      // 1. éªŒè¯å‚ä¸è€…èµ„æ ¼
      await this.validateParticipants(dto.mentorId, dto.studentId, dto.projectId)
      
      // 2. æ£€æŸ¥é‡å¤å…³ç³»
      const existingRelationship = await this.findExistingRelationship(
        dto.mentorId, dto.studentId, dto.projectId
      )
      if (existingRelationship) {
        throw new BusinessException('å¸ˆå¾’å…³ç³»å·²å­˜åœ¨')
      }
      
      // 3. éªŒè¯å¯¼å¸ˆå·¥ä½œè´Ÿè·
      await this.validateMentorWorkload(dto.mentorId)
      
      // 4. åˆ›å»ºå…³ç³»è®°å½•
      const relationship = await this.relationshipRepository.create({
        ...dto,
        status: 'active',
        establishedDate: new Date(),
        matchingType: 'manual',
        matchingScore: null,
        matchingReasons: ['æ‰‹åŠ¨æŒ‡æ´¾']
      }, transaction)
      
      // 5. æ›´æ–°å¯¼å¸ˆå·¥ä½œè´Ÿè·
      await this.updateMentorWorkload(dto.mentorId, 1, transaction)
      
      // 6. åˆ›å»ºåˆå§‹å¸¦æ•™è®¡åˆ’
      const plan = await this.planService.createInitialPlan(relationship, transaction)
      
      await transaction.commit()
      
      // 7. å‘é€é€šçŸ¥
      await this.notificationService.notifyRelationshipCreated(relationship)
      
      // 8. è®°å½•æ“ä½œæ—¥å¿—
      await this.auditService.logMentorshipAssignment(relationship, dto.createdBy)
      
      return relationship
    } catch (error) {
      await transaction.rollback()
      throw error
    }
  }
  
  // è°ƒæ•´å¸ˆå¾’å…³ç³»
  async adjustMentorshipRelationship(
    relationshipId: string, 
    adjustmentDto: AdjustMentorshipDto
  ): Promise<MentorshipRelationship> {
    const relationship = await this.findById(relationshipId)
    
    if (adjustmentDto.newMentorId && adjustmentDto.newMentorId !== relationship.mentorId) {
      // æ›´æ¢å¯¼å¸ˆ
      return await this.transferMentorship(relationship, adjustmentDto.newMentorId, adjustmentDto.reason)
    }
    
    if (adjustmentDto.adjustScope && adjustmentDto.adjustScope !== relationship.scope) {
      // è°ƒæ•´å¸¦æ•™èŒƒå›´
      return await this.adjustMentorshipScope(relationship, adjustmentDto.adjustScope, adjustmentDto.reason)
    }
    
    return relationship
  }
  
  // å¯¼å¸ˆæ›´æ¢æµç¨‹
  private async transferMentorship(
    relationship: MentorshipRelationship,
    newMentorId: string,
    reason: string
  ): Promise<MentorshipRelationship> {
    const transaction = await this.db.transaction()
    
    try {
      // 1. éªŒè¯æ–°å¯¼å¸ˆèµ„æ ¼
      await this.validateMentorWorkload(newMentorId)
      
      // 2. ä¿å­˜å†å²è®°å½•
      await this.archiveRelationshipHistory(relationship, transaction)
      
      // 3. æ›´æ–°å¸ˆå¾’å…³ç³»
      const oldMentorId = relationship.mentorId
      relationship.mentorId = newMentorId
      relationship.establishedDate = new Date()
      relationship.matchingType = 'manual'
      relationship.matchingReasons = [`å¯¼å¸ˆæ›´æ¢: ${reason}`]
      
      await this.relationshipRepository.update(relationship, transaction)
      
      // 4. æ›´æ–°å·¥ä½œè´Ÿè·
      await this.updateMentorWorkload(oldMentorId, -1, transaction)
      await this.updateMentorWorkload(newMentorId, 1, transaction)
      
      // 5. é‡æ–°åˆ¶å®šè®¡åˆ’
      await this.planService.revisePlanForNewMentor(relationship, transaction)
      
      await transaction.commit()
      
      // 6. å‘é€é€šçŸ¥
      await this.notificationService.notifyMentorshipTransfer(relationship, oldMentorId, reason)
      
      return relationship
    } catch (error) {
      await transaction.rollback()
      throw error
    }
  }
}

---

## 6.1 å‰ç«¯Mockæ•°æ®éªŒè¯

### âœ… **Mockæ•°æ®å®ç°å®Œæ•´åº¦ï¼š95%**

ç»è¿‡è¯¦ç»†æ£€æŸ¥ï¼Œå‰ç«¯Mockæ•°æ®å®ç°éå¸¸å®Œå–„ï¼Œä¸ºåç«¯å¼€å‘å¥ å®šäº†åšå®åŸºç¡€ï¼š

#### **ğŸ¯ Mockæ•°æ®è¦†ç›–èŒƒå›´**

| **åŠŸèƒ½æ¨¡å—** | **Mockæ–‡ä»¶** | **å®Œæ•´åº¦** | **æ ¸å¿ƒæ•°æ®** | **éªŒè¯çŠ¶æ€** |
|-------------|-------------|-----------|-------------|------------|
| **å¯¼å¸ˆå·¥ä½œå°** | `mentorWorkbench.ts` | âœ… 100% | å­¦å‘˜åˆ—è¡¨ã€å¸¦æ•™è®¡åˆ’ã€è¯„ä»·è®°å½•ã€äº¤äº’è®°å½• | âœ… å·²éªŒè¯ |
| **é¡¹ç›®è¯¦æƒ…-å¸¦æ•™** | `MentoringManagement.vue` | âœ… 100% | å¸ˆå¾’å…³ç³»ã€é¡¹ç›®é˜¶æ®µã€å·¥ä½œè´Ÿè½½æ•°æ® | âœ… å·²éªŒè¯ |
| **å­¦ä¹ ä¸­å¿ƒ** | `personalCenter.ts` | âœ… 100% | ä»»åŠ¡ã€è¯¾è¡¨ã€æˆç»©ã€ç›®æ ‡ã€å¾…åŠäº‹é¡¹ | âœ… å·²éªŒè¯ |
| **å¸¦æ•™èµ„æºç®¡ç†** | `ResourceToolsPanel.vue` | âœ… 95% | å¸¦æ•™èµ„æºã€å·¥å…·ã€ææ–™åº“ | âœ… å·²éªŒè¯ |

#### **ğŸ”„ Mockåˆ‡æ¢æœºåˆ¶**

```typescript
// å¼€å‘ç¯å¢ƒè‡ªåŠ¨å¯ç”¨Mock
const mockMode = ref(import.meta.env.DEV)

// åˆ‡æ¢åˆ°çœŸå®APIçš„æ–¹æ³•
if (mockMode.value) {
  return mockData  // Mockæ•°æ®
} else {
  return await api() // çœŸå®API
}
```

#### **ğŸ“Š Mockæ•°æ®è´¨é‡è¯„ä¼°**

| **è´¨é‡ç»´åº¦** | **è¯„åˆ†** | **è¯´æ˜** |
|-------------|---------|----------|
| **æ•°æ®å®Œæ•´æ€§** | â­â­â­â­â­ | è¦†ç›–æ‰€æœ‰ä¸šåŠ¡åœºæ™¯ |
| **ç±»å‹å®‰å…¨** | â­â­â­â­â­ | å®Œå…¨ç¬¦åˆTypeScriptç±»å‹å®šä¹‰ |
| **ä¸šåŠ¡é€»è¾‘** | â­â­â­â­â­ | æ¨¡æ‹ŸçœŸå®çš„å¸ˆå¾’å…³ç³»æ•°æ® |
| **åˆ‡æ¢ä¾¿åˆ©** | â­â­â­â­â­ | ä¸€é”®åˆ‡æ¢Mock/çœŸå®API |

**ç»“è®º**ï¼šâœ… **å‰ç«¯Mockæ•°æ®å·²å°±ç»ªï¼Œå¯ç«‹å³å¼€å§‹åç«¯å¼€å‘**

---

## 6.2 å¼€å‘é˜¶æ®µè§„åˆ’

### ğŸ¯ **ä¸‰é˜¶æ®µå¼€å‘è®¡åˆ’**

åŸºäºå‰ç«¯Mockæ•°æ®å·²å®Œæˆçš„ç°çŠ¶ï¼Œé‡‡ç”¨ **2â†’3â†’4 ä¸‰æ­¥èµ°** å¼€å‘ç­–ç•¥ï¼š

```mermaid
graph TD
    A[âœ… Phase 0: å‰ç«¯Mockå®Œæˆ<br/>å·²å°±ç»ª] --> B[ğŸ¯ Phase 1: æ•°æ®åº“è®¾è®¡<br/>Week 1]
    B --> C[ğŸ”¥ Phase 2: APIå®ç°<br/>Week 2-3]
    C --> D[ğŸš€ Phase 3: è”è°ƒä¼˜åŒ–<br/>Week 4]
    
    style A fill:#e8f5e9
    style B fill:#fff3e0
    style C fill:#e3f2fd
    style D fill:#fce4ec
```

### **ğŸ“… Phase 1: æ•°æ®åº“è®¾è®¡ä¸€æ­¥åˆ°ä½ï¼ˆWeek 1ï¼‰**

#### **ç›®æ ‡**ï¼šåˆ›å»ºå®Œæ•´ç¨³å®šçš„æ•°æ®åº“è¡¨ç»“æ„ï¼Œé¿å…åç»­è¿ç§»é—®é¢˜

**ä»»åŠ¡æ¸…å•**ï¼š
```sql
-- æ ¸å¿ƒå¸¦æ•™è¡¨ï¼ˆåŸºäºå‰ç«¯ç±»å‹å®šä¹‰ï¼‰
âœ… mentorship_projects        -- å¸¦æ•™é¡¹ç›®ä¸»è¡¨
âœ… mentorship_relationships   -- å¸ˆå¾’å…³ç³»è¡¨  
âœ… mentorship_phases         -- å¸¦æ•™é˜¶æ®µè¡¨
âœ… mentorship_tasks          -- å¸¦æ•™ä»»åŠ¡è¡¨
âœ… mentorship_interactions   -- å¸ˆå¾’äº¤äº’è¡¨
âœ… mentorship_evaluations    -- å¸¦æ•™è¯„ä»·è¡¨
âœ… mentorship_plans          -- å¸¦æ•™è®¡åˆ’è¡¨
âœ… mentorship_resources      -- å¸¦æ•™èµ„æºè¡¨
```

**å…³é”®åŸåˆ™**ï¼š
- ğŸ¯ **å‰ç«¯é©±åŠ¨**ï¼šå­—æ®µå®Œå…¨åŸºäºå‰ç«¯TypeScriptç±»å‹å®šä¹‰
- ğŸ“Š **é¢„ç•™æ‰©å±•**ï¼šä½¿ç”¨JSONå­—æ®µå­˜å‚¨å¤æ‚é…ç½®
- ğŸ”— **å®Œæ•´å…³è”**ï¼šè®¾è®¡å®Œæ•´çš„å¤–é”®å’Œç´¢å¼•
- âš¡ **ä¸€æ­¥åˆ°ä½**ï¼šé¿å…åç»­é¢‘ç¹çš„è¡¨ç»“æ„ä¿®æ”¹

### **ğŸ”¥ Phase 2: APIå®ç°ï¼ˆWeek 2-3ï¼‰**

#### **Week 2: é¡¹ç›®è¯¦æƒ…-å¸¦æ•™ APIï¼ˆç•Œé¢ä¼˜å…ˆï¼‰**

**å¯¹åº”å‰ç«¯**ï¼š`MentoringManagement.vue` çš„4ä¸ªTab
```typescript
// ä¼˜å…ˆçº§1ï¼šæŒ‡æ´¾å…³ç³»Tab
POST /api/projects/{projectId}/mentorship/relationships  // åˆ›å»ºå¸ˆå¾’å…³ç³»
GET  /api/projects/{projectId}/mentorship/relationships  // è·å–å¸ˆå¾’å…³ç³»

// ä¼˜å…ˆçº§2ï¼šä»»åŠ¡çŠ¶æ€Tab  
GET  /api/projects/{projectId}/mentorship/progress      // è·å–å¸¦æ•™è¿›åº¦

// ä¼˜å…ˆçº§3ï¼šå¸¦æ•™è¯„ä»·Tab
GET  /api/projects/{projectId}/mentorship/evaluations  // è·å–è¯„ä»·åˆ—è¡¨
POST /api/projects/{projectId}/mentorship/evaluations  // æäº¤è¯„ä»·

// ä¼˜å…ˆçº§4ï¼šå¸¦æ•™æ ‡å‡†Tab
GET  /api/projects/{projectId}/mentorship/standards    // è·å–æ ‡å‡†é…ç½®
```

#### **Week 3: å¯¼å¸ˆå·¥ä½œå° APIï¼ˆåŠŸèƒ½ä¼˜å…ˆï¼‰**

**å¯¹åº”å‰ç«¯**ï¼š`mentorWorkbench.ts` store å’Œç›¸å…³ç»„ä»¶
```typescript
// å·¥ä½œå°æ¦‚è§ˆ
GET  /api/workbench/mentor/dashboard                   // å¯¼å¸ˆå·¥ä½œå°æ•°æ®

// å­¦å‘˜ç®¡ç†Panel  
GET  /api/workbench/mentor/students                    // æˆ‘çš„å­¦å‘˜åˆ—è¡¨
GET  /api/workbench/mentor/students/{studentId}        // å­¦å‘˜è¯¦æƒ…
POST /api/workbench/mentor/interactions                // è®°å½•å¸ˆå¾’äº¤äº’

// å¸¦æ•™æ‰§è¡ŒPanel
GET  /api/workbench/mentor/plans                       // å¸¦æ•™è®¡åˆ’ç®¡ç†
POST /api/workbench/mentor/plans                       // åˆ›å»ºè®¡åˆ’
GET  /api/workbench/mentor/tasks                       // ä»»åŠ¡åˆ†é…ç®¡ç†
POST /api/workbench/mentor/evaluations                 // æäº¤é˜¶æ®µè¯„ä»·

// èµ„æºå·¥å…·Panel
GET  /api/workbench/mentor/resources                   // å¸¦æ•™èµ„æºæŸ¥è¯¢
```

### **ğŸš€ Phase 3: è”è°ƒä¼˜åŒ–ï¼ˆWeek 4ï¼‰**

#### **ç›®æ ‡**ï¼šå‰åç«¯å®Œç¾é›†æˆï¼Œç³»ç»Ÿæ­£å¸¸è¿è¡Œ

**ä»»åŠ¡æ¸…å•**ï¼š
```typescript
// 1. å‰ç«¯åˆ‡æ¢åˆ°çœŸå®API
mockMode.value = false

// 2. APIæ¥å£è°ƒè¯•
- å‚æ•°éªŒè¯å’Œé”™è¯¯å¤„ç†
- æ•°æ®æ ¼å¼ä¸€è‡´æ€§æ£€æŸ¥  
- æ€§èƒ½ä¼˜åŒ–

// 3. åŠŸèƒ½éªŒè¯
- å››ä¸ªç•Œé¢åŠŸèƒ½å®Œæ•´æ€§æµ‹è¯•
- æ•°æ®æµè½¬æ­£ç¡®æ€§éªŒè¯
- ç”¨æˆ·ä½“éªŒä¼˜åŒ–

// 4. æ•™åŠ¡å·¥ä½œå°é›†æˆ
GET /api/workbench/admin/mentorship/overview           // å¸¦æ•™é¡¹ç›®æ¦‚è§ˆ
GET /api/workbench/admin/mentorship/statistics         // å¸¦æ•™ç»Ÿè®¡æ•°æ®
```

### **ğŸ“Š å¼€å‘è¿›åº¦è·Ÿè¸ª**

| **é˜¶æ®µ** | **æ—¶é—´** | **å…³é”®äº¤ä»˜ç‰©** | **éªŒæ”¶æ ‡å‡†** | **é£é™©æ§åˆ¶** |
|---------|---------|---------------|-------------|------------|
| **Phase 1** | Week 1 | å®Œæ•´æ•°æ®åº“è¡¨ç»“æ„ | è¡¨ç»“æ„ä¸å‰ç«¯ç±»å‹100%åŒ¹é… | æ•°æ®åº“è®¾è®¡è¯„å®¡ |
| **Phase 2.1** | Week 2 | é¡¹ç›®è¯¦æƒ…-å¸¦æ•™API | 4ä¸ªTabåŠŸèƒ½æ­£å¸¸ | æ¯æ—¥APIæµ‹è¯• |
| **Phase 2.2** | Week 3 | å¯¼å¸ˆå·¥ä½œå°API | 3ä¸ªPanelåŠŸèƒ½æ­£å¸¸ | åŠŸèƒ½æ¼”ç¤ºéªŒæ”¶ |
| **Phase 3** | Week 4 | å‰åç«¯é›†æˆå®Œæˆ | å››ä¸ªç•Œé¢æ— Mockè¿è¡Œ | ç³»ç»Ÿå®Œæ•´æ€§æµ‹è¯• |

---

## 6.3 æŠ€æœ¯å®ç°è·¯å¾„

### ğŸ—ï¸ **æ¶æ„ä¸€è‡´æ€§ä¿è¯**

**ä¸é¡¹ç›®ç®¡ç†æ¨¡å—å®Œå…¨ä¸€è‡´çš„æŠ€æœ¯æ ˆ**ï¼š
```typescript
// åç«¯æŠ€æœ¯æ ˆï¼ˆä¸project-managementä¿æŒä¸€è‡´ï¼‰
- Framework: NestJS + TypeScript
- Database: MySQL + Prisma ORM  
- Validation: class-validator + class-transformer
- Authentication: JWTï¼ˆæš‚æ—¶å…³é—­ï¼Œè°ƒè¯•å®Œæˆåå¯ç”¨ï¼‰
- API Style: RESTful + ç»Ÿä¸€å“åº”æ ¼å¼
```

**ç›®å½•ç»“æ„è®¾è®¡**ï¼š
```
src/modules/mentorship/
â”œâ”€â”€ controllers/           // APIæ§åˆ¶å™¨
â”‚   â”œâ”€â”€ project-mentorship.controller.ts      // é¡¹ç›®è¯¦æƒ…-å¸¦æ•™
â”‚   â”œâ”€â”€ mentor-workbench.controller.ts        // å¯¼å¸ˆå·¥ä½œå°  
â”‚   â””â”€â”€ admin-mentorship.controller.ts        // æ•™åŠ¡å·¥ä½œå°
â”œâ”€â”€ services/             // ä¸šåŠ¡æœåŠ¡
â”‚   â”œâ”€â”€ mentorship-project.service.ts
â”‚   â”œâ”€â”€ mentorship-relationship.service.ts
â”‚   â””â”€â”€ mentorship-evaluation.service.ts
â”œâ”€â”€ dto/                  // æ•°æ®ä¼ è¾“å¯¹è±¡
â”‚   â”œâ”€â”€ create-relationship.dto.ts
â”‚   â””â”€â”€ mentorship-evaluation.dto.ts
â””â”€â”€ mentorship.module.ts  // æ¨¡å—å®šä¹‰
```

### ğŸ“‹ **å¼€å‘è§„èŒƒå’Œæ ‡å‡†**

#### **APIè®¾è®¡è§„èŒƒ**
```typescript
// ç»Ÿä¸€çš„APIå“åº”æ ¼å¼ï¼ˆä¸ç°æœ‰é¡¹ç›®ä¿æŒä¸€è‡´ï¼‰
interface ApiResponse<T> {
  code: number
  message: string
  data: T
}

// ç¤ºä¾‹ï¼šåˆ›å»ºå¸ˆå¾’å…³ç³»API
@Post('/api/projects/:projectId/mentorship/relationships')
async createRelationship(
  @Param('projectId') projectId: string,
  @Body() dto: CreateMentorshipRelationshipDto
): Promise<ApiResponse<MentorshipRelationship>> {
  const relationship = await this.mentorshipService.createRelationship(dto)
  return {
    code: 201,
    message: 'å¸ˆå¾’å…³ç³»åˆ›å»ºæˆåŠŸ',
    data: relationship
  }
}
```

#### **æ•°æ®éªŒè¯è§„èŒƒ**
```typescript
// DTOéªŒè¯ï¼ˆä¸ç°æœ‰é¡¹ç›®ä¿æŒä¸€è‡´ï¼‰
export class CreateMentorshipRelationshipDto {
  @IsUUID(4, { message: 'é¡¹ç›®IDå¿…é¡»æ˜¯æœ‰æ•ˆçš„UUID' })
  projectId: string

  @IsUUID(4, { message: 'å¯¼å¸ˆIDå¿…é¡»æ˜¯æœ‰æ•ˆçš„UUID' })
  mentorId: string

  @IsUUID(4, { message: 'å­¦å‘˜IDå¿…é¡»æ˜¯æœ‰æ•ˆçš„UUID' })
  studentId: string

  @IsEnum(['manual', 'smart_assisted', 'auto_assigned'])
  matchingType: 'manual' | 'smart_assisted' | 'auto_assigned'

  @IsOptional()
  @IsArray()
  matchingReasons?: string[]
}
```

### ğŸ”„ **å‰åç«¯é›†æˆç­–ç•¥**

#### **Mockåˆ°çœŸå®APIçš„æ— ç¼åˆ‡æ¢**
```typescript
// å‰ç«¯APIè°ƒç”¨ï¼ˆå·²æœ‰æœºåˆ¶ï¼‰
const mentorshipApi = {
  async getRelationships(projectId: string) {
    if (mockMode.value) {
      return mockRelationships  // Mockæ•°æ®
    } else {
      // çœŸå®APIè°ƒç”¨ï¼ˆæˆ‘ä»¬è¦å®ç°çš„éƒ¨åˆ†ï¼‰
      return await request.get(`/api/projects/${projectId}/mentorship/relationships`)
    }
  }
}
```

#### **æ•°æ®æ ¼å¼ä¸€è‡´æ€§ä¿è¯**
```typescript
// åç«¯è¿”å›æ ¼å¼å¿…é¡»ä¸å‰ç«¯Mockæ•°æ®å®Œå…¨ä¸€è‡´
interface MentorshipRelationship {
  id: string
  projectId: string
  mentorId: string
  studentId: string
  // ... å…¶ä»–å­—æ®µå¿…é¡»ä¸å‰ç«¯ç±»å‹å®šä¹‰100%åŒ¹é…
}
```

---

## 6.4 æµ‹è¯•ä¸éƒ¨ç½²è®¡åˆ’

### ğŸ§ª **æµ‹è¯•ç­–ç•¥**

#### **Phase 1: æ•°æ®åº“æµ‹è¯•**
```sql
-- æ•°æ®å®Œæ•´æ€§æµ‹è¯•
- å¤–é”®çº¦æŸéªŒè¯
- ç´¢å¼•æ€§èƒ½æµ‹è¯•  
- æ•°æ®ç±»å‹åŒ¹é…éªŒè¯
- JSONå­—æ®µæŸ¥è¯¢æµ‹è¯•
```

#### **Phase 2: APIå•å…ƒæµ‹è¯•**
```typescript
// APIæ¥å£æµ‹è¯•ï¼ˆæ¯ä¸ªAPIéƒ½è¦æµ‹è¯•ï¼‰
describe('MentorshipController', () => {
  it('should create mentorship relationship', async () => {
    const dto = { projectId: 'test', mentorId: 'mentor1', studentId: 'student1' }
    const result = await controller.createRelationship(dto)
    expect(result.code).toBe(201)
    expect(result.data.id).toBeDefined()
  })
})
```

#### **Phase 3: é›†æˆæµ‹è¯•**
```typescript
// å‰åç«¯é›†æˆæµ‹è¯•
- å…³é—­Mockæ¨¡å¼ï¼šmockMode.value = false
- å››ä¸ªç•Œé¢åŠŸèƒ½å®Œæ•´æ€§æµ‹è¯•
- æ•°æ®æµè½¬æ­£ç¡®æ€§éªŒè¯
- æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒæµ‹è¯•
```

### ğŸš€ **éƒ¨ç½²è®¡åˆ’**

#### **å¼€å‘ç¯å¢ƒéƒ¨ç½²**
```bash
# 1. æ•°æ®åº“è¿ç§»
npm run prisma:migrate:dev

# 2. åç«¯æœåŠ¡å¯åŠ¨
npm run start:dev

# 3. å‰ç«¯åˆ‡æ¢API
# ä¿®æ”¹å‰ç«¯ï¼šmockMode.value = false
```

#### **ç”Ÿäº§ç¯å¢ƒå‡†å¤‡**
```bash
# 1. æ•°æ®åº“å¤‡ä»½å’Œè¿ç§»ç­–ç•¥
# 2. APIæ€§èƒ½ä¼˜åŒ–
# 3. é”™è¯¯ç›‘æ§å’Œæ—¥å¿—ç³»ç»Ÿ
# 4. ç”¨æˆ·åŸ¹è®­å’Œæ–‡æ¡£å‡†å¤‡
```

### ğŸ“ˆ **æˆåŠŸéªŒæ”¶æ ‡å‡†**

| **éªŒæ”¶é¡¹** | **æ ‡å‡†** | **éªŒè¯æ–¹æ³•** |
|----------|---------|-------------|
| **æ•°æ®åº“ç¨³å®šæ€§** | é›¶è¿ç§»é—®é¢˜ | ç”Ÿäº§ç¯å¢ƒè¿è¡Œ1å‘¨æ— è¡¨ç»“æ„ä¿®æ”¹ |
| **APIå®Œæ•´æ€§** | 100%åŠŸèƒ½å®ç° | å››ä¸ªç•Œé¢æ‰€æœ‰åŠŸèƒ½æ­£å¸¸è¿è¡Œ |
| **æ€§èƒ½æŒ‡æ ‡** | APIå“åº”<500ms | å‹åŠ›æµ‹è¯•éªŒè¯ |
| **ç”¨æˆ·ä½“éªŒ** | ä¸Mockæ¨¡å¼ä¸€è‡´ | ç”¨æˆ·æµ‹è¯•åé¦ˆ |

### ğŸ¯ **é¡¹ç›®æˆåŠŸæŒ‡æ ‡**

âœ… **å®Œæˆæ ‡å¿—**ï¼š
1. å‰ç«¯å®Œå…¨å…³é—­Mockæ¨¡å¼æ­£å¸¸è¿è¡Œ
2. å››ä¸ªå¸¦æ•™ç•Œé¢åŠŸèƒ½å®Œæ•´å¯ç”¨
3. æ•°æ®åº“ç»“æ„ç¨³å®šæ— éœ€ä¿®æ”¹  
4. APIæ€§èƒ½æ»¡è¶³ç”Ÿäº§ç¯å¢ƒè¦æ±‚
5. ç”¨æˆ·éªŒæ”¶æµ‹è¯•é€šè¿‡

**é¢„æœŸæ—¶é—´çº¿**ï¼šğŸ—“ï¸ **4å‘¨å®Œæˆ** ï¼ˆWeek 1æ•°æ®åº“ + Week 2-3 API + Week 4è”è°ƒï¼‰

**é£é™©æ§åˆ¶**ï¼šæ¯å‘¨æœ‰æ˜ç¡®äº¤ä»˜ç‰©ï¼Œä¾¿äºåŠæ—¶è°ƒæ•´å’Œé£é™©æ§åˆ¶

---

## ğŸ“‹ **æ€»ç»“ä¸å»ºè®®**

### ğŸ¯ **å¼€å‘ç­–ç•¥ç¡®è®¤**

åŸºäºè¯¦ç»†åˆ†æï¼Œ**å¼ºçƒˆæ¨è**é‡‡ç”¨ä»¥ä¸‹å¼€å‘ç­–ç•¥ï¼š

1. **âœ… å‰ç«¯Mockå·²å°±ç»ª**ï¼š95%å®Œæˆåº¦ï¼Œå¯ç«‹å³å¼€å§‹åç«¯å¼€å‘
2. **ğŸ¯ æ•°æ®åº“ä¸€æ­¥åˆ°ä½**ï¼šåŸºäºå‰ç«¯ç±»å‹å®šä¹‰è®¾è®¡å®Œæ•´è¡¨ç»“æ„  
3. **ğŸ”¥ ç•Œé¢é©±åŠ¨å¼€å‘**ï¼šæŒ‰å‰ç«¯4ä¸ªç•Œé¢ä¼˜å…ˆçº§å®ç°API
4. **ğŸš€ Mockåˆ°çœŸå®API**ï¼šæ— ç¼åˆ‡æ¢ï¼Œå¿«é€ŸéªŒè¯æ•ˆæœ

### ğŸ’¡ **æ ¸å¿ƒä¼˜åŠ¿**

| **ä¼˜åŠ¿** | **è¯´æ˜** | **ä»·å€¼** |
|---------|---------|---------|
| **é£é™©å¯æ§** | æ¯å‘¨æ˜ç¡®äº¤ä»˜ç‰© | åŠæ—¶å‘ç°å’Œè§£å†³é—®é¢˜ |
| **æ•ˆæœå¯è§** | ç•Œé¢é©±åŠ¨å¼€å‘ | å¿«é€ŸéªŒè¯å’Œæ¼”ç¤ºæ•ˆæœ |
| **æ¶æ„ä¸€è‡´** | ä¸é¡¹ç›®ç®¡ç†æ¨¡å—æŠ€æœ¯æ ˆä¸€è‡´ | é™ä½å­¦ä¹ å’Œç»´æŠ¤æˆæœ¬ |
| **æ‰©å±•æ€§å¼º** | é¢„ç•™JSONå­—æ®µå’Œæ¥å£ | æ”¯æŒåç»­æ™ºèƒ½åŒ–åŠŸèƒ½ |

### ğŸš€ **ç«‹å³è¡ŒåŠ¨è®¡åˆ’**

**ä¸‹ä¸€æ­¥**ï¼šæŒ‰ç…§ **Phase 1: æ•°æ®åº“è®¾è®¡** å¼€å§‹å®æ–½
- ğŸ“… **æ—¶é—´**ï¼šWeek 1  
- ğŸ¯ **ç›®æ ‡**ï¼šåˆ›å»º8ä¸ªæ ¸å¿ƒå¸¦æ•™è¡¨
- âœ… **éªŒæ”¶**ï¼šè¡¨ç»“æ„ä¸å‰ç«¯ç±»å‹100%åŒ¹é…
- ğŸ”„ **è¾“å‡º**ï¼šå¯ç›´æ¥ç”¨äºAPIå¼€å‘çš„å®Œæ•´æ•°æ®åº“

**æœŸå¾…æˆæœ**ï¼š4å‘¨åå®ç°å®Œæ•´çš„å¸¦æ•™ç®¡ç†åç«¯ç³»ç»Ÿï¼Œå‰ç«¯æ— éœ€ä¿®æ”¹å³å¯åˆ‡æ¢åˆ°çœŸå®APIè¿è¡Œã€‚
```

---

## 4.2 å¸¦æ•™è®¡åˆ’æ‰§è¡Œæµç¨‹

### ğŸ“… **è‡ªåŠ¨åŒ–è®¡åˆ’ç”Ÿæˆ**

```typescript
class MentorshipPlanGenerationService {
  
  // åŸºäºå¸ˆå¾’å…³ç³»è‡ªåŠ¨ç”Ÿæˆåˆå§‹è®¡åˆ’
  async generateInitialPlan(relationship: MentorshipRelationship): Promise<MentorshipPlan> {
    // 1. è·å–è®¡åˆ’æ¨¡æ¿
    const template = await this.getApplicableTemplate(relationship)
    
    // 2. åˆ†æå­¦å‘˜èƒ½åŠ›åŸºçº¿
    const studentBaseline = await this.analyzeStudentBaseline(relationship.studentId)
    
    // 3. è·å–å¯¼å¸ˆä¸“é•¿
    const mentorExpertise = await this.getMentorExpertise(relationship.mentorId)
    
    // 4. ç”Ÿæˆä¸ªæ€§åŒ–è®¡åˆ’
    const personalizedPlan = await this.generatePersonalizedPlan(
      template, studentBaseline, mentorExpertise, relationship
    )
    
    // 5. åˆ›å»ºè®¡åˆ’è®°å½•
    const plan = await this.planRepository.create({
      projectId: relationship.projectId,
      relationshipId: relationship.id,
      planTitle: `${relationship.studentName} å¸¦æ•™è®¡åˆ’`,
      ...personalizedPlan,
      status: 'draft',
      createdBy: 'system'
    })
    
    // 6. ç”Ÿæˆé˜¶æ®µè§„åˆ’
    const phases = await this.generatePhases(plan, personalizedPlan.phaseTemplates)
    
    // 7. ç”Ÿæˆä»»åŠ¡è§„åˆ’
    for (const phase of phases) {
      await this.generateTasks(phase, personalizedPlan.taskTemplates)
    }
    
    return plan
  }
  
  // ä¸ªæ€§åŒ–è®¡åˆ’ç”Ÿæˆç®—æ³•
  private async generatePersonalizedPlan(
    template: PlanTemplate,
    studentBaseline: StudentBaseline,
    mentorExpertise: MentorExpertise,
    relationship: MentorshipRelationship
  ): Promise<PersonalizedPlan> {
    const plan: PersonalizedPlan = {
      totalDuration: template.defaultDuration,
      overallGoal: template.defaultGoal,
      specificObjectives: [],
      phaseTemplates: [],
      taskTemplates: []
    }
    
    // 1. æ ¹æ®å­¦å‘˜åŸºçº¿è°ƒæ•´ç›®æ ‡
    plan.specificObjectives = this.customizeObjectives(
      template.objectives, 
      studentBaseline.currentLevel,
      studentBaseline.learningGoals
    )
    
    // 2. æ ¹æ®å¯¼å¸ˆä¸“é•¿ä¼˜åŒ–é˜¶æ®µ
    plan.phaseTemplates = this.optimizePhases(
      template.phases,
      mentorExpertise.specialties,
      studentBaseline.weakAreas
    )
    
    // 3. æ ¹æ®æ—¶é—´çº¦æŸè°ƒæ•´æ—¶é•¿
    if (relationship.sourceTrainingProject) {
      const trainingDuration = await this.getTrainingDuration(relationship.sourceTrainingProject.id)
      plan.totalDuration = Math.min(plan.totalDuration, trainingDuration + 30) // åŸ¹è®­æœŸ+30å¤©
    }
    
    return plan
  }
  
  // é˜¶æ®µç”Ÿæˆ
  private async generatePhases(plan: MentorshipPlan, phaseTemplates: PhaseTemplate[]): Promise<MentorshipPhase[]> {
    const phases: MentorshipPhase[] = []
    let currentStartDate = plan.plannedStartDate
    
    for (let i = 0; i < phaseTemplates.length; i++) {
      const template = phaseTemplates[i]
      const phaseDuration = Math.floor(plan.totalDuration / phaseTemplates.length)
      
      const phase = await this.phaseRepository.create({
        projectId: plan.projectId,
        name: template.name,
        description: template.description,
        phaseNumber: i + 1,
        plannedDuration: phaseDuration,
        startDate: currentStartDate,
        endDate: new Date(currentStartDate.getTime() + phaseDuration * 24 * 60 * 60 * 1000),
        objectives: template.objectives,
        expectedOutcomes: template.expectedOutcomes,
        status: i === 0 ? 'active' : 'pending'
      })
      
      phases.push(phase)
      currentStartDate = phase.endDate
    }
    
    return phases
  }
}
```

### ğŸ¯ **è®¡åˆ’æ‰§è¡Œè·Ÿè¸ª**

```typescript
class MentorshipExecutionTrackingService {
  
  // è®¡åˆ’æ‰§è¡Œç›‘æ§
  async trackPlanExecution(projectId: string): Promise<ExecutionStatus> {
    const plan = await this.planService.getActiveProjectPlan(projectId)
    const phases = await this.phaseService.getProjectPhases(projectId)
    const tasks = await this.taskService.getProjectTasks(projectId)
    
    return {
      plan: {
        status: plan.status,
        overallProgress: this.calculateOverallProgress(phases),
        currentPhase: this.getCurrentPhase(phases),
        timeProgress: this.calculateTimeProgress(plan),
        isOnTrack: this.assessIfOnTrack(plan, phases)
      },
      phases: phases.map(phase => ({
        id: phase.id,
        name: phase.name,
        status: phase.status,
        progress: phase.progress,
        startDate: phase.startDate,
        endDate: phase.endDate
      })),
      tasks: tasks.map(task => ({
        id: task.id,
        title: task.title,
        status: task.status,
        progress: task.progress,
        dueDate: task.dueDate,
        assignedTo: task.assignedTo
      }))
    }
  }
  
  private calculateOverallProgress(phases: MentorshipPhase[]): number {
    if (phases.length === 0) return 0
    const totalProgress = phases.reduce((sum, phase) => sum + phase.progress, 0)
    return Math.round(totalProgress / phases.length)
  }
  
  private getCurrentPhase(phases: MentorshipPhase[]): MentorshipPhase | null {
    return phases.find(phase => phase.status === 'active') || null
  }
  
  private calculateTimeProgress(plan: MentorshipPlan): number {
    const now = new Date()
    const start = new Date(plan.plannedStartDate)
    const end = new Date(plan.plannedEndDate)
    
    if (now < start) return 0
    if (now > end) return 100
    
    const totalDuration = end.getTime() - start.getTime()
    const elapsed = now.getTime() - start.getTime()
    
    return Math.round((elapsed / totalDuration) * 100)
  }
  
  private assessIfOnTrack(plan: MentorshipPlan, phases: MentorshipPhase[]): boolean {
    const timeProgress = this.calculateTimeProgress(plan)
    const overallProgress = this.calculateOverallProgress(phases)
    
    // å¦‚æœå®é™…è¿›åº¦æ¯”æ—¶é—´è¿›åº¦æ»åè¶…è¿‡10%ï¼Œè®¤ä¸ºåç¦»è½¨é“
    return overallProgress >= (timeProgress - 10)
  }
}

---

## 4.3 å¸¦æ•™è¯„ä»·æµç¨‹

### ğŸ“Š **å¤šç»´åº¦è¯„ä»·ä½“ç³»**

```typescript
class MentorshipEvaluationService {
  
  // åˆ›å»ºè¯„ä»·
  async createEvaluation(evaluationDto: CreateEvaluationDto): Promise<MentorshipEvaluation> {
    const evaluation = await this.evaluationRepository.create({
      ...evaluationDto,
      status: 'draft',
      evaluationDate: new Date(),
      id: this.generateEvaluationId()
    })
    
    // è§¦å‘è¯„ä»·åˆ›å»ºäº‹ä»¶
    this.eventEmitter.emit('evaluation.created', {
      evaluation,
      projectId: evaluation.projectId,
      evaluatorId: evaluation.evaluatorId
    })
    
    return evaluation
  }
  
  // æäº¤è¯„ä»·
  async submitEvaluation(evaluationId: string, finalData: EvaluationSubmissionDto): Promise<MentorshipEvaluation> {
    const evaluation = await this.findById(evaluationId)
    
    // è®¡ç®—ç»¼åˆè¯„åˆ†
    const overallScore = this.calculateOverallScore(finalData)
    
    // æ›´æ–°è¯„ä»·çŠ¶æ€
    evaluation.status = 'submitted'
    evaluation.submittedAt = new Date()
    evaluation.overallScore = overallScore
    evaluation.specificFeedback = finalData.feedback
    evaluation.strengths = finalData.strengths
    evaluation.improvementAreas = finalData.improvementAreas
    evaluation.nextPhaseGoals = finalData.nextPhaseGoals
    
    await this.evaluationRepository.update(evaluation)
    
    // è§¦å‘è¯„ä»·æäº¤äº‹ä»¶
    this.eventEmitter.emit('evaluation.submitted', {
      evaluation,
      projectId: evaluation.projectId
    })
    
    // è‡ªåŠ¨æ›´æ–°ç›¸å…³æ•°æ®
    await this.updateRelatedData(evaluation)
    
    return evaluation
  }
  
  // åŒå‘è¯„ä»·æµç¨‹
  async facilitateMutualEvaluation(relationshipId: string, phaseId: string): Promise<EvaluationPair> {
    const relationship = await this.relationshipService.findById(relationshipId)
    
    // å¯¼å¸ˆè¯„ä»·å­¦å‘˜
    const mentorToStudentEval = await this.createEvaluation({
      relationshipId,
      phaseId,
      evaluatorId: relationship.mentorId,
      evaluatorType: 'mentor',
      evaluateeId: relationship.studentId,
      evaluateeType: 'student',
      evaluationTitle: `${relationship.mentorName}å¯¹${relationship.studentName}çš„é˜¶æ®µè¯„ä»·`
    })
    
    // å­¦å‘˜è¯„ä»·å¯¼å¸ˆ
    const studentToMentorEval = await this.createEvaluation({
      relationshipId,
      phaseId,
      evaluatorId: relationship.studentId,
      evaluatorType: 'student',
      evaluateeId: relationship.mentorId,
      evaluateeType: 'mentor',
      evaluationTitle: `${relationship.studentName}å¯¹${relationship.mentorName}çš„åé¦ˆè¯„ä»·`
    })
    
    return {
      mentorToStudent: mentorToStudentEval,
      studentToMentor: studentToMentorEval,
      relationshipId,
      phaseId
    }
  }
  
  // ç»¼åˆè¯„åˆ†è®¡ç®—
  private calculateOverallScore(data: EvaluationSubmissionDto): number {
    const weights = {
      technicalSkills: 0.3,
      communication: 0.2,
      learningAttitude: 0.2,
      problemSolving: 0.15,
      collaboration: 0.15
    }
    
    let totalScore = 0
    let totalWeight = 0
    
    Object.entries(weights).forEach(([dimension, weight]) => {
      const score = data[`${dimension}Score`]
      if (score !== null && score !== undefined) {
        totalScore += score * weight
        totalWeight += weight
      }
    })
    
    return totalWeight > 0 ? Math.round((totalScore / totalWeight) * 100) / 100 : 0
  }
  
  // æ›´æ–°ç›¸å…³æ•°æ®
  private async updateRelatedData(evaluation: MentorshipEvaluation): Promise<void> {
    // æ›´æ–°å¸ˆå¾’å…³ç³»è¯„åˆ†
    await this.updateRelationshipRating(evaluation.relationshipId, evaluation.overallScore)
    
    // æ›´æ–°é¡¹ç›®è¿›åº¦
    if (evaluation.phaseId) {
      await this.updatePhaseCompletion(evaluation.phaseId, evaluation)
    }
    
    // åŒæ­¥åˆ°æˆé•¿æ¡£æ¡ˆ
    await this.syncToGrowthProfile(evaluation)
    
    // è§¦å‘åç»­æµç¨‹
    if (this.shouldTriggerNextPhase(evaluation)) {
      await this.triggerNextPhase(evaluation.projectId, evaluation.phaseId)
    }
  }
}
```

### ğŸ”„ **è¯„ä»·å‘¨æœŸç®¡ç†**

```typescript
class EvaluationCycleService {
  
  // è‡ªåŠ¨è¯„ä»·æé†’
  async scheduleEvaluationReminders(): Promise<void> {
    const upcomingEvaluations = await this.getUpcomingEvaluations()
    
    for (const evaluation of upcomingEvaluations) {
      await this.sendEvaluationReminder(evaluation)
    }
  }
  
  // è¯„ä»·å®Œæˆåº¦æ£€æŸ¥
  async checkEvaluationCompleteness(projectId: string): Promise<EvaluationCompleteness> {
    const project = await this.projectService.findById(projectId)
    const relationships = await this.relationshipService.getProjectRelationships(projectId)
    const evaluations = await this.evaluationService.getProjectEvaluations(projectId)
    
    return {
      projectId,
      totalRelationships: relationships.length,
      completedEvaluations: evaluations.filter(e => e.status === 'finalized').length,
      pendingEvaluations: evaluations.filter(e => e.status === 'pending').length,
      overdueEvaluations: evaluations.filter(e => this.isOverdue(e)).length,
      completionRate: this.calculateCompletionRate(relationships, evaluations)
    }
  }
}
```

---

## 4.4 æ•°æ®åŒæ­¥æœºåˆ¶

### ğŸ”„ **è·¨æ¨¡å—æ•°æ®åŒæ­¥**

```typescript
class MentorshipDataSyncService {
  
  // ä¸åŸ¹è®­é¡¹ç›®çš„åŒå‘åŒæ­¥
  async syncWithTrainingProject(mentorshipProjectId: string): Promise<SyncResult> {
    const mentorshipProject = await this.mentorshipService.findById(mentorshipProjectId)
    const trainingProject = await this.trainingService.findById(mentorshipProject.sourceTrainingProjectId)
    
    const syncResult: SyncResult = {
      success: true,
      operations: [],
      errors: []
    }
    
    try {
      // åŒæ­¥å­¦å‘˜ä¿¡æ¯
      await this.syncStudentInfo(mentorshipProject, trainingProject, syncResult)
      
      // åŒæ­¥é¡¹ç›®çŠ¶æ€
      await this.syncProjectStatus(mentorshipProject, trainingProject, syncResult)
      
      // åŒæ­¥ä»»åŠ¡å®Œæˆæƒ…å†µ
      await this.syncTaskCompletion(mentorshipProject, trainingProject, syncResult)
      
      // åŒæ­¥è¯„ä»·ç»“æœ
      await this.syncEvaluationResults(mentorshipProject, trainingProject, syncResult)
      
    } catch (error) {
      syncResult.success = false
      syncResult.errors.push({
        operation: 'training_project_sync',
        error: error.message,
        timestamp: new Date()
      })
    }
    
    return syncResult
  }
  
  // ä¸æˆé•¿æ¡£æ¡ˆçš„å®æ—¶åŒæ­¥
  async syncToGrowthProfile(mentorshipData: MentorshipSyncData): Promise<void> {
    const growthProfile = await this.growthProfileService.findByUserId(mentorshipData.userId)
    
    // æ›´æ–°å¸¦æ•™å†å²
    await this.updateMentorshipHistory(growthProfile, mentorshipData)
    
    // æ›´æ–°æŠ€èƒ½å‘å±•
    await this.updateSkillDevelopment(growthProfile, mentorshipData.skillProgress)
    
    // æ›´æ–°æˆé•¿è½¨è¿¹
    await this.updateGrowthTimeline(growthProfile, {
      type: 'mentorship',
      event: mentorshipData.event,
      date: mentorshipData.date,
      description: mentorshipData.description,
      impact: mentorshipData.impact
    })
    
    // è§¦å‘æˆé•¿æ¡£æ¡ˆæ›´æ–°äº‹ä»¶
    this.eventEmitter.emit('growth.profile.updated', {
      userId: mentorshipData.userId,
      source: 'mentorship',
      data: mentorshipData
    })
  }
  
  // äº‹ä»¶é©±åŠ¨çš„è‡ªåŠ¨åŒæ­¥
  @EventHandler('mentorship.relationship.created')
  async handleRelationshipCreated(event: RelationshipCreatedEvent): Promise<void> {
    // åŒæ­¥åˆ°å­¦ä¹ ä¸­å¿ƒ
    await this.syncToPersonalCenter(event.relationship)
    
    // åŒæ­¥åˆ°æ•™åŠ¡å·¥ä½œå°
    await this.syncToAdminWorkbench(event.relationship)
    
    // é€šçŸ¥ç›¸å…³äººå‘˜
    await this.notificationService.notifyRelationshipEstablished(event.relationship)
  }
  
  @EventHandler('mentorship.evaluation.submitted')
  async handleEvaluationSubmitted(event: EvaluationSubmittedEvent): Promise<void> {
    // è‡ªåŠ¨æ›´æ–°æˆé•¿æ¡£æ¡ˆ
    await this.syncEvaluationToGrowthProfile(event.evaluation)
    
    // æ›´æ–°é¡¹ç›®ç»Ÿè®¡
    await this.updateProjectStatistics(event.evaluation.projectId)
    
    // è§¦å‘ä¸‹ä¸€é˜¶æ®µæµç¨‹
    if (event.evaluation.type === 'phase') {
      await this.processPhaseCompletion(event.evaluation)
    }
  }
  
  // å®šæ—¶åŒæ­¥ä»»åŠ¡
  @Cron('0 0 2 * * *') // æ¯å¤©å‡Œæ™¨2ç‚¹æ‰§è¡Œ
  async dailySyncTask(): Promise<void> {
    console.log('ğŸ”„ å¼€å§‹æ‰§è¡Œå¸¦æ•™æ•°æ®æ—¥åŒæ­¥ä»»åŠ¡')
    
    // åŒæ­¥æ‰€æœ‰æ´»è·ƒé¡¹ç›®
    const activeProjects = await this.mentorshipService.getActiveProjects()
    
    for (const project of activeProjects) {
      try {
        await this.syncWithTrainingProject(project.id)
        await this.syncProjectToGrowthProfile(project)
      } catch (error) {
        console.error(`âŒ é¡¹ç›® ${project.id} åŒæ­¥å¤±è´¥:`, error)
      }
    }
    
    console.log('âœ… å¸¦æ•™æ•°æ®æ—¥åŒæ­¥ä»»åŠ¡å®Œæˆ')
  }
}
```

### ğŸ“Š **æ•°æ®ä¸€è‡´æ€§ä¿è¯**

```typescript
class DataConsistencyService {
  
  // æ•°æ®ä¸€è‡´æ€§æ£€æŸ¥
  async checkDataConsistency(): Promise<ConsistencyReport> {
    const report: ConsistencyReport = {
      timestamp: new Date(),
      issues: [],
      suggestions: []
    }
    
    // æ£€æŸ¥å¸ˆå¾’å…³ç³»æ•°æ®ä¸€è‡´æ€§
    await this.checkRelationshipConsistency(report)
    
    // æ£€æŸ¥è¯„ä»·æ•°æ®å®Œæ•´æ€§
    await this.checkEvaluationCompleteness(report)
    
    // æ£€æŸ¥é¡¹ç›®çŠ¶æ€åŒæ­¥
    await this.checkProjectStatusSync(report)
    
    return report
  }
  
  // æ•°æ®ä¿®å¤
  async repairDataInconsistency(issueId: string): Promise<RepairResult> {
    const issue = await this.getConsistencyIssue(issueId)
    
    switch (issue.type) {
      case 'missing_relationship':
        return await this.repairMissingRelationship(issue)
      case 'orphan_evaluation':
        return await this.repairOrphanEvaluation(issue)
      case 'status_mismatch':
        return await this.repairStatusMismatch(issue)
      default:
        throw new Error(`æœªçŸ¥çš„æ•°æ®ä¸€è‡´æ€§é—®é¢˜ç±»å‹: ${issue.type}`)
    }
  }
}
```

---

## 5.1 ä¸åŸ¹è®­é¡¹ç›®ç³»ç»Ÿé›†æˆ

### ğŸ”— **æ— ç¼é›†æˆæ¶æ„**

```typescript
class TrainingProjectIntegrationService {
  
  // åŸ¹è®­é¡¹ç›®å‘å¸ƒæ—¶è‡ªåŠ¨åˆ›å»ºå¸¦æ•™é¡¹ç›®
  @EventHandler('training.project.published')
  async handleTrainingProjectPublished(event: TrainingProjectPublishedEvent): Promise<void> {
    const trainingProject = event.project
    
    // æ£€æŸ¥æ˜¯å¦å¯ç”¨å¸¦æ•™åŠŸèƒ½
    if (!trainingProject.mentorshipEnabled) {
      console.log(`åŸ¹è®­é¡¹ç›® ${trainingProject.id} æœªå¯ç”¨å¸¦æ•™åŠŸèƒ½`)
      return
    }
    
    // è·å–é¡¹ç›®å‚ä¸è€…
    const participants = await this.getTrainingProjectParticipants(trainingProject.id)
    const students = participants.filter(p => p.role === 'student')
    
    // ä¸ºæ¯ä¸ªå­¦å‘˜åˆ›å»ºå¸¦æ•™é¡¹ç›®
    for (const student of students) {
      await this.createMentorshipForStudent(trainingProject, student)
    }
    
    console.log(`âœ… ä¸ºåŸ¹è®­é¡¹ç›® ${trainingProject.id} åˆ›å»ºäº† ${students.length} ä¸ªå¸¦æ•™é¡¹ç›®`)
  }
  
  // ä¸ºå­¦å‘˜åˆ›å»ºå¸¦æ•™é¡¹ç›®
  private async createMentorshipForStudent(
    trainingProject: TrainingProject, 
    student: ProjectParticipant
  ): Promise<MentorshipProject> {
    
    // æ™ºèƒ½å¯¼å¸ˆåŒ¹é…
    const mentor = await this.mentorMatchingService.findBestMentor(student, trainingProject)
    
    if (!mentor) {
      console.warn(`âš ï¸ å­¦å‘˜ ${student.userId} æœªæ‰¾åˆ°åˆé€‚çš„å¯¼å¸ˆ`)
      // è®°å½•åˆ°å¾…åˆ†é…é˜Ÿåˆ—
      await this.addToPendingAssignment(student, trainingProject)
      return null
    }
    
    // åˆ›å»ºå¸¦æ•™é¡¹ç›®
    const mentorshipProject = await this.mentorshipService.createProject({
      title: `${student.name} - ${trainingProject.name} å¸¦æ•™é¡¹ç›®`,
      sourceTrainingProjectId: trainingProject.id,
      sourceTrainingProjectName: trainingProject.name,
      mentorId: mentor.id,
      mentorName: mentor.name,
      studentId: student.userId,
      studentName: student.name,
      plannedDuration: this.calculateMentorshipDuration(trainingProject),
      startDate: trainingProject.startDate,
      plannedEndDate: this.calculateEndDate(trainingProject),
      autoCreated: true,
      projectType: 'training_based',
      status: 'active'
    })
    
    // åˆ›å»ºå¸ˆå¾’å…³ç³»
    await this.relationshipService.createRelationship({
      projectId: mentorshipProject.id,
      mentorId: mentor.id,
      studentId: student.userId,
      type: mentor.certifications.includes('academy_certified') ? 'academy_certified' : 'department_assigned',
      scope: 'full_project',
      matchingType: 'smart_assisted',
      establishedDate: new Date()
    })
    
    // ç”Ÿæˆåˆå§‹å¸¦æ•™è®¡åˆ’
    await this.planService.generateInitialPlan(mentorshipProject, trainingProject)
    
    // å‘é€é€šçŸ¥
    await this.notificationService.notifyMentorshipCreated(mentorshipProject, mentor, student)
    
    return mentorshipProject
  }
  
  // åŸ¹è®­ä»»åŠ¡å®Œæˆæ—¶åŒæ­¥åˆ°å¸¦æ•™é¡¹ç›®
  @EventHandler('training.task.completed')
  async handleTrainingTaskCompleted(event: TrainingTaskCompletedEvent): Promise<void> {
    const task = event.task
    const student = event.student
    
    // æŸ¥æ‰¾å¯¹åº”çš„å¸¦æ•™é¡¹ç›®
    const mentorshipProject = await this.findMentorshipByTrainingProject(
      task.projectId, 
      student.id
    )
    
    if (!mentorshipProject) return
    
    // åŒæ­¥ä»»åŠ¡å®ŒæˆçŠ¶æ€
    await this.syncTaskCompletion(mentorshipProject, task, student)
    
    // è§¦å‘å¯¼å¸ˆé€šçŸ¥
    await this.notifyMentorOfTaskCompletion(mentorshipProject, task, student)
  }
  
  // åŸ¹è®­è¯„ä»·æ—¶åŒæ­¥å¸¦æ•™è¯„ä»·
  @EventHandler('training.evaluation.submitted')
  async handleTrainingEvaluationSubmitted(event: TrainingEvaluationSubmittedEvent): Promise<void> {
    const evaluation = event.evaluation
    
    // æŸ¥æ‰¾ç›¸å…³å¸¦æ•™é¡¹ç›®
    const mentorshipProjects = await this.findRelatedMentorshipProjects(evaluation.projectId)
    
    for (const mentorshipProject of mentorshipProjects) {
      // åˆ›å»ºå¯¹åº”çš„å¸¦æ•™è¯„ä»·è®°å½•
      await this.createCorrespondingMentorshipEvaluation(mentorshipProject, evaluation)
    }
  }
}
```

### ğŸ¯ **æ™ºèƒ½å¯¼å¸ˆåŒ¹é…**

```typescript
class MentorMatchingService {
  
  async findBestMentor(student: ProjectParticipant, project: TrainingProject): Promise<Mentor | null> {
    // è·å–å¯ç”¨å¯¼å¸ˆåˆ—è¡¨
    const availableMentors = await this.getAvailableMentors(project)
    
    if (availableMentors.length === 0) {
      return null
    }
    
    // è®¡ç®—åŒ¹é…åˆ†æ•°
    const matchingResults = await Promise.all(
      availableMentors.map(mentor => this.calculateMatchingScore(student, mentor, project))
    )
    
    // é€‰æ‹©æœ€ä½³åŒ¹é…
    const bestMatch = matchingResults.reduce((best, current) => 
      current.score > best.score ? current : best
    )
    
    // åŒ¹é…åˆ†æ•°é˜ˆå€¼æ£€æŸ¥
    if (bestMatch.score < 0.6) {
      console.warn(`âš ï¸ æœ€ä½³åŒ¹é…åˆ†æ•° ${bestMatch.score} ä½äºé˜ˆå€¼ 0.6`)
      return null
    }
    
    return bestMatch.mentor
  }
  
  private async calculateMatchingScore(
    student: ProjectParticipant, 
    mentor: Mentor, 
    project: TrainingProject
  ): Promise<MatchingResult> {
    let score = 0
    const factors: MatchingFactor[] = []
    
    // æŠ€èƒ½åŒ¹é…åº¦ (æƒé‡: 40%)
    const skillMatch = await this.calculateSkillMatch(student, mentor, project)
    score += skillMatch * 0.4
    factors.push({ name: 'æŠ€èƒ½åŒ¹é…', score: skillMatch, weight: 0.4 })
    
    // éƒ¨é—¨ç›¸å…³æ€§ (æƒé‡: 20%)
    const deptMatch = student.department === mentor.department ? 1.0 : 0.5
    score += deptMatch * 0.2
    factors.push({ name: 'éƒ¨é—¨åŒ¹é…', score: deptMatch, weight: 0.2 })
    
    // å¯¼å¸ˆå·¥ä½œè´Ÿè· (æƒé‡: 20%)
    const workloadScore = this.calculateWorkloadScore(mentor)
    score += workloadScore * 0.2
    factors.push({ name: 'å·¥ä½œè´Ÿè·', score: workloadScore, weight: 0.2 })
    
    // å¯¼å¸ˆè¯„åˆ†å†å² (æƒé‡: 15%)
    const ratingScore = mentor.rating / 5.0
    score += ratingScore * 0.15
    factors.push({ name: 'å†å²è¯„åˆ†', score: ratingScore, weight: 0.15 })
    
    // å¯ç”¨æ€§ (æƒé‡: 5%)
    const availabilityScore = await this.checkAvailability(mentor, project)
    score += availabilityScore * 0.05
    factors.push({ name: 'æ—¶é—´å¯ç”¨æ€§', score: availabilityScore, weight: 0.05 })
    
    return {
      mentor,
      score: Math.round(score * 100) / 100,
      factors,
      reasons: this.generateMatchingReasons(factors)
    }
  }
}
```

---

## 5.2 ä¸æˆé•¿æ¡£æ¡ˆç³»ç»Ÿé›†æˆ

### ğŸ“ˆ **å®æ—¶æˆé•¿è®°å½•**

```typescript
class GrowthProfileIntegrationService {
  
  // å¸¦æ•™å¼€å§‹æ—¶åˆ›å»ºæˆé•¿æ¡£æ¡ˆè®°å½•
  @EventHandler('mentorship.relationship.established')
  async handleMentorshipStarted(event: RelationshipEstablishedEvent): Promise<void> {
    const relationship = event.relationship
    
    // åœ¨æˆé•¿æ¡£æ¡ˆä¸­åˆ›å»ºå¸¦æ•™å†å²è®°å½•
    await this.growthProfileService.addMentorshipHistory({
      profileId: await this.getProfileId(relationship.studentId),
      projectId: relationship.projectId,
      projectName: relationship.projectName || 'å¸¦æ•™é¡¹ç›®',
      role: 'student',
      mentorId: relationship.mentorId,
      mentorName: relationship.mentorName,
      studentId: relationship.studentId,
      studentName: relationship.studentName,
      startDate: relationship.establishedDate,
      status: 'active',
      sourceType: 'training_project',
      sourceProjectId: relationship.sourceTrainingProjectId
    })
    
    // ä¸ºå¯¼å¸ˆä¹Ÿåˆ›å»ºè®°å½•
    await this.growthProfileService.addMentorshipHistory({
      profileId: await this.getProfileId(relationship.mentorId),
      projectId: relationship.projectId,
      projectName: relationship.projectName || 'å¸¦æ•™é¡¹ç›®',
      role: 'mentor',
      mentorId: relationship.mentorId,
      mentorName: relationship.mentorName,
      studentId: relationship.studentId,
      studentName: relationship.studentName,
      startDate: relationship.establishedDate,
      status: 'active',
      sourceType: 'training_project',
      sourceProjectId: relationship.sourceTrainingProjectId
    })
  }
  
  // å¸¦æ•™è¯„ä»·æ—¶æ›´æ–°æˆé•¿æ¡£æ¡ˆ
  @EventHandler('mentorship.evaluation.finalized')
  async handleEvaluationFinalized(event: EvaluationFinalizedEvent): Promise<void> {
    const evaluation = event.evaluation
    
    if (evaluation.evaluateeType === 'student') {
      // æ›´æ–°å­¦å‘˜æˆé•¿æ¡£æ¡ˆ
      await this.updateStudentGrowthProfile(evaluation)
    } else if (evaluation.evaluateeType === 'mentor') {
      // æ›´æ–°å¯¼å¸ˆæˆé•¿æ¡£æ¡ˆ
      await this.updateMentorGrowthProfile(evaluation)
    }
  }
  
  private async updateStudentGrowthProfile(evaluation: MentorshipEvaluation): Promise<void> {
    const profileId = await this.getProfileId(evaluation.evaluateeId)
    
    // æ·»åŠ æˆé•¿æ—¶é—´çº¿äº‹ä»¶
    await this.growthProfileService.addTimelineEvent({
      profileId,
      type: 'mentorship',
      category: 'development',
      title: `å¸¦æ•™è¯„ä»· - ${evaluation.evaluationTitle}`,
      description: evaluation.specificFeedback,
      date: evaluation.evaluationDate,
      importance: 'high',
      relatedProjectId: evaluation.projectId,
      relatedProjectType: 'mentorship',
      metadata: {
        evaluationType: evaluation.evaluationType,
        overallScore: evaluation.overallScore,
        evaluatorName: evaluation.evaluatorName,
        strengths: evaluation.strengths,
        improvementAreas: evaluation.improvementAreas
      }
    })
    
    // æ›´æ–°æŠ€èƒ½å‘å±•è®°å½•
    if (evaluation.customCriteria && evaluation.customCriteria.skillAssessments) {
      await this.updateSkillProgress(profileId, evaluation.customCriteria.skillAssessments)
    }
    
    // æ·»åŠ åé¦ˆè®°å½•
    await this.growthProfileService.addFeedback({
      profileId,
      feedbackType: 'mentor',
      source: 'mentorship',
      rating: evaluation.overallScore,
      content: evaluation.specificFeedback,
      feedbackDate: evaluation.evaluationDate,
      feedbackBy: evaluation.evaluatorId,
      feedbackByName: evaluation.evaluatorName,
      visibility: 'shared',
      relatedProjectId: evaluation.projectId
    })
  }
  
  // æŠ€èƒ½è¿›å±•åŒæ­¥
  async syncSkillProgress(mentorshipProjectId: string): Promise<void> {
    const project = await this.mentorshipService.findById(mentorshipProjectId)
    const evaluations = await this.evaluationService.getProjectEvaluations(mentorshipProjectId)
    
    // åˆ†ææŠ€èƒ½å‘å±•è¶‹åŠ¿
    const skillProgress = this.analyzeSkillProgress(evaluations)
    
    // æ›´æ–°å­¦å‘˜æŠ€èƒ½æ¡£æ¡ˆ
    const studentProfileId = await this.getProfileId(project.studentId)
    await this.growthProfileService.updateSkills(studentProfileId, skillProgress)
  }
  
  // æˆå°±è®°å½•åŒæ­¥
  @EventHandler('mentorship.milestone.achieved')
  async handleMilestoneAchieved(event: MilestoneAchievedEvent): Promise<void> {
    const milestone = event.milestone
    
    await this.growthProfileService.addAchievement({
      profileId: await this.getProfileId(milestone.studentId),
      title: milestone.title,
      description: milestone.description,
      achievementType: 'milestone',
      level: this.determineLevelFromMilestone(milestone),
      source: 'mentorship',
      sourceProjectId: milestone.projectId,
      achievedDate: milestone.achievedDate,
      evidence: milestone.evidence,
      impact: milestone.impact
    })
  }
}
```

### ğŸ¯ **æ™ºèƒ½æˆé•¿åˆ†æ**

```typescript
class GrowthAnalysisService {
  
  // åŸºäºå¸¦æ•™æ•°æ®çš„æˆé•¿åˆ†æ
  async analyzeMentorshipGrowth(userId: string): Promise<MentorshipGrowthAnalysis> {
    const mentorshipHistory = await this.getMentorshipHistory(userId)
    const evaluations = await this.getMentorshipEvaluations(userId)
    
    return {
      userId,
      analysisDate: new Date(),
      
      // æŠ€èƒ½å‘å±•è½¨è¿¹
      skillDevelopment: this.analyzeSkillDevelopment(evaluations),
      
      // å­¦ä¹ èƒ½åŠ›è¯„ä¼°
      learningCapability: this.assessLearningCapability(evaluations),
      
      // å¯¼å¸ˆå…³ç³»è´¨é‡
      mentorRelationshipQuality: this.evaluateMentorRelationships(mentorshipHistory),
      
      // æˆé•¿é€Ÿåº¦åˆ†æ
      growthVelocity: this.calculateGrowthVelocity(evaluations),
      
      // é¢„æµ‹æ€§å»ºè®®
      recommendations: await this.generateGrowthRecommendations(userId, evaluations)
    }
  }
  
  // å¯¼å¸ˆæ•ˆæœåˆ†æ
  async analyzeMentorEffectiveness(mentorId: string): Promise<MentorEffectivenessReport> {
    const mentorships = await this.getMentorshipsByMentor(mentorId)
    const evaluations = await this.getMentorEvaluations(mentorId)
    
    return {
      mentorId,
      reportDate: new Date(),
      
      // å¸¦æ•™æˆåŠŸç‡
      successRate: this.calculateMentorSuccessRate(mentorships),
      
      // å­¦å‘˜å¹³å‡æˆé•¿é€Ÿåº¦
      averageGrowthRate: this.calculateAverageGrowthRate(mentorships),
      
      // ä¸“ä¸šé¢†åŸŸå¼ºé¡¹
      expertiseStrengths: this.identifyExpertiseStrengths(evaluations),
      
      // æ”¹è¿›å»ºè®®
      improvementSuggestions: this.generateMentorImprovementSuggestions(evaluations),
      
      // å·¥ä½œè´Ÿè·åˆ†æ
      workloadAnalysis: this.analyzeWorkload(mentorships)
    }
  }
}
```

---

## 5.3 ä¸äººäº‹ç³»ç»Ÿé›†æˆ

### ğŸ‘¥ **äººäº‹æ•°æ®åŒæ­¥**

```typescript
class HRSystemIntegrationService {
  
  // åŒæ­¥äººå‘˜å˜åŠ¨
  @EventHandler('hr.employee.updated')
  async handleEmployeeUpdated(event: EmployeeUpdatedEvent): Promise<void> {
    const employee = event.employee
    
    // æ›´æ–°å¸¦æ•™ç³»ç»Ÿä¸­çš„äººå‘˜ä¿¡æ¯
    await this.updateEmployeeInMentorship(employee)
    
    // æ£€æŸ¥éƒ¨é—¨å˜åŠ¨å½±å“
    if (event.changes.includes('department')) {
      await this.handleDepartmentChange(employee)
    }
    
    // æ£€æŸ¥èŒä½å˜åŠ¨å½±å“
    if (event.changes.includes('position')) {
      await this.handlePositionChange(employee)
    }
  }
  
  // å‘˜å·¥ç¦»èŒå¤„ç†
  @EventHandler('hr.employee.terminated')
  async handleEmployeeTerminated(event: EmployeeTerminatedEvent): Promise<void> {
    const employeeId = event.employeeId
    
    // å¤„ç†ä½œä¸ºå¯¼å¸ˆçš„æƒ…å†µ
    const activeMentorships = await this.getActiveMentorships(employeeId, 'mentor')
    for (const mentorship of activeMentorships) {
      await this.handleMentorDeparture(mentorship)
    }
    
    // å¤„ç†ä½œä¸ºå­¦å‘˜çš„æƒ…å†µ
    const activeStudentships = await this.getActiveMentorships(employeeId, 'student')
    for (const studentship of activeStudentships) {
      await this.handleStudentDeparture(studentship)
    }
  }
  
  // æ–°å‘˜å·¥å…¥èŒè‡ªåŠ¨åˆ†é…å¯¼å¸ˆ
  @EventHandler('hr.employee.onboarded')
  async handleEmployeeOnboarded(event: EmployeeOnboardedEvent): Promise<void> {
    const newEmployee = event.employee
    
    // æ£€æŸ¥æ˜¯å¦éœ€è¦åˆ†é…å¯¼å¸ˆ
    if (await this.shouldAssignMentor(newEmployee)) {
      await this.autoAssignMentorForNewEmployee(newEmployee)
    }
  }
  
  // ç»©æ•ˆè¯„ä¼°é›†æˆ
  async integratePerformanceReview(performanceReview: PerformanceReview): Promise<void> {
    const employeeId = performanceReview.employeeId
    
    // è·å–å‘˜å·¥çš„å¸¦æ•™å†å²
    const mentorshipHistory = await this.getMentorshipHistory(employeeId)
    
    // å°†å¸¦æ•™æˆæœçº³å…¥ç»©æ•ˆè¯„ä¼°
    const mentorshipContribution = this.calculateMentorshipContribution(mentorshipHistory)
    
    // åŒæ­¥åˆ°HRç³»ç»Ÿ
    await this.hrApi.updatePerformanceReview(performanceReview.id, {
      mentorshipContribution,
      mentorshipProjects: mentorshipHistory.length,
      mentorshipRating: this.calculateAverageMentorshipRating(mentorshipHistory)
    })
  }
  
  // äººæ‰å‘å±•è§„åˆ’é›†æˆ
  async integrateTalentDevelopment(employeeId: string): Promise<TalentDevelopmentPlan> {
    const mentorshipData = await this.getMentorshipHistory(employeeId)
    const growthProfile = await this.getGrowthProfile(employeeId)
    
    return {
      employeeId,
      currentLevel: growthProfile.currentLevel,
      
      // åŸºäºå¸¦æ•™å†å²çš„å‘å±•å»ºè®®
      developmentRecommendations: this.generateDevelopmentRecommendations(mentorshipData),
      
      // å¯¼å¸ˆèµ„è´¨è¯„ä¼°
      mentorQualification: await this.assessMentorQualification(employeeId),
      
      // å­¦ä¹ éœ€æ±‚åˆ†æ
      learningNeeds: this.analyzeLearningNeeds(mentorshipData),
      
      // èŒä¸šå‘å±•è·¯å¾„å»ºè®®
      careerPathSuggestions: this.generateCareerPathSuggestions(mentorshipData, growthProfile)
    }
  }
}
```

### ğŸ“Š **HRæ•°æ®ä»ªè¡¨æ¿**

```typescript
class HRMentorshipDashboardService {
  
  // ç»„ç»‡çº§åˆ«å¸¦æ•™ç»Ÿè®¡
  async getOrganizationMentorshipStats(): Promise<OrganizationMentorshipStats> {
    return {
      timestamp: new Date(),
      
      // æ•´ä½“æ•°æ®
      totalActiveMentorships: await this.countActiveMentorships(),
      totalCertifiedMentors: await this.countCertifiedMentors(),
      totalMentorshipProjects: await this.countMentorshipProjects(),
      
      // éƒ¨é—¨åˆ†å¸ƒ
      departmentDistribution: await this.getMentorshipByDepartment(),
      
      // æˆåŠŸç‡ç»Ÿè®¡
      successRates: await this.calculateSuccessRates(),
      
      // æŠ•èµ„å›æŠ¥åˆ†æ
      roi: await this.calculateMentorshipROI(),
      
      // è¶‹åŠ¿åˆ†æ
      trends: await this.analyzeMentorshipTrends()
    }
  }
  
  // å¯¼å¸ˆèµ„æºè§„åˆ’
  async planMentorResources(): Promise<MentorResourcePlan> {
    const currentCapacity = await this.getCurrentMentorCapacity()
    const projectedDemand = await this.projectMentorshipDemand()
    
    return {
      currentState: currentCapacity,
      projectedNeed: projectedDemand,
      gap: this.calculateResourceGap(currentCapacity, projectedDemand),
      recommendations: this.generateResourceRecommendations(currentCapacity, projectedDemand),
      timeline: this.createImplementationTimeline()
    }
  }
}
```

---

**ğŸ“‹ æ€»ç»“**ï¼šç°åœ¨`å¸¦æ•™ç®¡ç†åç«¯è®¾è®¡.md`æ–‡æ¡£å·²ç»**å®Œæ•´**ï¼ŒåŒ…å«äº†ï¼š

âœ… **å®Œæ•´çš„6å¤§æ¨¡å—**ï¼š
1. **è®¾è®¡ç†å¿µä¸æ¶æ„** (1.1-1.3)
2. **æ•°æ®åº“è®¾è®¡** (2.1-2.3) 
3. **APIæ¥å£è®¾è®¡** (3.1-3.3)
4. **ä¸šåŠ¡æµç¨‹è®¾è®¡** (4.1-4.4) - âœ… å·²è¡¥å…¨
5. **ç³»ç»Ÿé›†æˆè®¾è®¡** (5.1-5.3) - âœ… å·²è¡¥å…¨
6. **å®æ–½è®¡åˆ’** (6.1-6.4) - âœ… å·²å®Œå–„

ğŸ“Š **æ–‡æ¡£å®Œæ•´åº¦ï¼š100%** - ç°åœ¨å¯ä»¥å¼€å§‹**Phase 1: æ•°æ®åº“è®¾è®¡**äº†ï¼